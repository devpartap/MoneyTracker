import{_ as me}from"./c_header-9d9d33cf.js";import{d as ve,c as be,h as ke,_ as $e,i as ne,r as q,l as x,q as D,s as N,y as f,u as F,x as o,F as I,z as j,C as K,H as xe,B as d,D as Q,A as M,E as we,G as De}from"./index-1bafc52b.js";import{e as Ne,g as ue,w as Be,C as Fe,D as Se,E as oe,B as O}from"./Button-0fdcb3db.js";import{b as qe,h as Me}from"./fade-in-scale-up.cssr-259a1f73.js";import{N as se}from"./Select-688ca19f.js";import{N as X}from"./Divider-a0214056.js";import{N as Ce}from"./Scrollbar-22e9b6c5.js";const ze={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},Re=()=>ze,Ee={name:"Flex",self:Re},Pe=Ee,Ye=Object.assign(Object.assign({},ue.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),ie=ve({name:"Flex",props:Ye,setup($){const{mergedClsPrefixRef:k,mergedRtlRef:n}=Ne($),y=ue("Flex","-flex",void 0,Pe,$,k);return{rtlEnabled:Be("Flex",n,k),mergedClsPrefix:k,margin:be(()=>{const{size:e}=$;if(Array.isArray(e))return{horizontal:e[0],vertical:e[1]};if(typeof e=="number")return{horizontal:e,vertical:e};const{self:{[Fe("gap",e)]:_}}=y.value,{row:m,col:u}=Se(_);return{horizontal:oe(u),vertical:oe(m)}})}},render(){const{vertical:$,reverse:k,align:n,inline:y,justify:i,margin:e,wrap:_,mergedClsPrefix:m,rtlEnabled:u}=this,B=qe(Me(this),!1);return B.length?ke("div",{role:"none",class:[`${m}-flex`,u&&`${m}-flex--rtl`],style:{display:y?"inline-flex":"flex",flexDirection:(()=>$&&!k?"column":$&&k?"column-reverse":!$&&k?"row-reverse":"row")(),justifyContent:i,flexWrap:!_||$?"nowrap":"wrap",alignItems:n,gap:`${e.vertical}px ${e.horizontal}px`}},B):null}});const V=$=>(we("data-v-48097259"),$=$(),De(),$),Ie=V(()=>f("span",{style:{color:"gray","font-weight":"bold","margin-top":"12px"}},"View: ",-1)),je={style:{width:"30%","margin-top":"10px","padding-bottom":"10px"}},Oe=V(()=>f("span",{style:{color:"gray","font-weight":"bold","margin-top":"12px"}},"Group By: ",-1)),Ve={style:{width:"27%","margin-top":"10px","padding-bottom":"10px"}},We=["onClick"],Ge={id:"itm_id"},Te={id:"itm_name"},Ae={id:"itm_cls"},He={id:"itm_amt"},Le={id:"itm_dte"},Je={key:1},Ue=V(()=>f("h2",{style:{"text-align":"center",color:"gray"}},"NO SPENDING FOUND",-1)),Ke=[Ue],Qe={id:"itm_id"},Xe={id:"itm_name"},Ze={id:"itm_cls"},et={id:"itm_amt"},tt={id:"itm_dte"},at={id:"itm_id"},rt={id:"itm_name"},lt={id:"itm_cls"},nt={id:"itm_amt"},ot={style:{display:"none"}},st={key:1},it=V(()=>f("h2",{style:{"text-align":"center",color:"gray"}},"NO SPENDING FOUND",-1)),ut=[it],dt={__name:"spendHistory",setup($){const k=ne("$globaldata"),n=ne("$data");let y=0,i=[],e=[[],[],[]],_=[],m=[],u=[0,0,0],B=[0,0,0],S=0,Z=0,ee=0,b=q(0),v=q(k.groupBy_opt),h=q(k.view_opt),c=q(k.catagory_actv),C=q(["#444444","#01700c"]),s=new Date(Date.now()),W=0,G=0,T=0,A=0;const z=["Jan","Feb","Mar","Aprl","May","June","July","Aug","Sept","Oct","Nov","Dec"],de=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];e[0][0]=n.required.length,e[1][0]=n.needs.length,e[2][0]=n.wants.length;let te=n.base.length;for(let r=0;r<=e[0][0]-1;r++)e[0].push(n.required[r].track.length);for(let r=0;r<=e[1][0]-1;r++)e[1].push(n.needs[r].track.length);for(let r=0;r<=e[2][0]-1;r++)e[2].push(n.wants[r].track.length);function R(r){let a=!1,t=!1,g=!1,p=!1,w=!1;console.log("rendering");let P=n.history.day[0].date.split("-"),Y=Date.parse(`${P[2]}/${P[1]}/${P[0]}`);for(;a!=!0;){if(T!=e[2][0]&&p==!1)for(let l=0;l<=e[2][0]-1;l++)for(;;){if(e[2][e[2][0]-l]<=0){e[2][e[2][0]-l]==0&&(T=T+1,e[2][e[2][0]-l]=-1);break}else if(console.log(`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`),n.wants[e[2][0]-1-l].track[e[2][e[2][0]-l]-1].date==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`){if(i.push({id:y,ref:e[2][0]-1-l,name:n.wants[e[2][0]-1-l].track[e[2][e[2][0]-l]-1].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.wants[e[2][0]-1-l].track[e[2][e[2][0]-l]-1].value,class:"Wants > "+n.wants[e[2][0]-1-l].name,catagory:"Wants>"+n.wants[e[2][0]-1-l].name,num_cat:3}),y=y+1,e[2][e[2][0]-l]=e[2][e[2][0]-l]-1,y>=r*(u[0]+1)){a=!0,u[0]=u[0]+1;break}}else break;if(a)break}else p=!0;if(a==!0)break;if(G!=e[1][0]&&g==!1)for(let l=0;l<=e[1][0]-1;l++)for(;;){if(e[1][e[1][0]-l]<=0){e[1][e[1][0]-l]==0&&(G=G+1,e[1][e[1][0]-l]=-1);break}else if(n.needs[e[1][0]-1-l].track[e[1][e[1][0]-l]-1].date==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`){if(i.push({id:y,ref:e[1][0]-1-l,name:n.needs[e[1][0]-1-l].track[e[1][e[1][0]-l]-1].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.needs[e[1][0]-1-l].track[e[1][e[1][0]-l]-1].value,class:"Needs > "+n.needs[e[1][0]-1-l].name,catagory:"Needs>"+n.needs[e[1][0]-1-l].name,num_cat:2}),y=y+1,e[1][e[1][0]-l]=e[1][e[1][0]-l]-1,y>=r*(u[0]+1)){a=!0,u[0]=u[0]+1;break}}else break;if(a)break}else g=!0;if(a==!0)break;if(W!=e[0][0]&&t==!1)for(let l=0;l<=e[0][0]-1;l++)for(;;){if(e[0][e[0][0]-l]<=0){e[0][e[0][0]-l]==0&&(W=W+1,e[0][e[0][0]-l]=-1);break}else if(console.log(`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`),n.required[e[0][0]-1-l].track[e[0][e[0][0]-l]-1].date==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`){if(i.push({id:y,ref:e[0][0]-1-l,name:n.required[e[0][0]-1-l].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.required[e[0][0]-1-l].track[e[0][e[0][0]-l]-1].value,class:"Required",catagory:"Required",num_cat:1}),y=y+1,e[0][e[0][0]-l]=e[0][e[0][0]-l]-1,y>=r*(u[0]+1)){a=!0,u[0]=u[0]+1;break}}else break;if(a)break}else t=!0;if(a==!0)break;if(A!=te&&w==!1){for(let l=te-1;l>=0;l--)if(console.log(`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`),n.base[l].init==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`&&(i.push({id:y,ref:l,name:n.base[l].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.base[l].value,class:"Base",catagory:"Base",num_cat:0}),y=y+1,A=A+1,y>=r*(u[0]+1))){a=!0,u[0]=u[0]+1;break}}else w=!0;if(s.valueOf()<Y){B[0]=!0,console.log("explict break!");break}if(t&&g&&p&&w){B[0]=!0,console.log("out of gas");break}s.setDate(s.getDate()-1)}b.value=b.value+1}function H(r){for(let a=u[1]*r+ee;_.length<(u[1]+1)*r;a++){if(a>n.history.day.length-1){B[1]=!0,console.log("out of gas!!");break}if(n.history.day[n.history.day.length-a-1].spend[0]==0&&n.history.day[n.history.day.length-a-1].spend[4]==0){ee+=1;continue}_.push({day_id:_.length,date:n.history.day[n.history.day.length-a-1].date.split("-"),catagory_spend:n.history.day[n.history.day.length-a-1].spend.slice(1)})}u[1]+=1,b.value=b.value+1}function L(r){let a,t,g=0;for(let p=u[2]*r;m.length<(u[2]+1)*r;p++){let w=[0,0,0,0];if(p+g>n.history.day.length-1){B[2]=!0,console.log("out of gas!!"),a=n.history.day[n.history.day.length-p-g].date.split("-"),t=n.history.day[n.history.day.length+1-p-g].date.split("-"),(t[1]!=a[1]||t[2]!=t[2])&&m.push({month_id:m.length,date:a.slice(1),catagory_spend:n.history.day[n.history.day.length-p-g].spend.slice(1)});break}for(;w.forEach((P,Y)=>{w[Y]+=n.history.day[n.history.day.length-1-p-g].spend[Y+1]}),!(p+g>n.history.day.length-2||(a=n.history.day[n.history.day.length-1-p-g].date.split("-"),t=n.history.day[n.history.day.length-2-p-g].date.split("-"),g+=1,t[1]!=a[1]||t[2]!=t[2])););m.push({month_id:m.length,date:n.history.day[n.history.day.length-p-g].date.split("-").slice(1),catagory_spend:w})}u[2]+=1,b.value=b.value+1}function J(r){let a="â‚¹ ";if(r){const t=r.toString();let g=!1,p=t.length-1;p%2!=0&&(a=a+t.substring(0,1)+",",p-=1,g=!0);for(let w=0;w<p;w+=2)a=a+t.substring(w+g,w+g+2)+",";return a=a.slice(0,a.length-1),a+=t.substring(t.length-1,t.length-0),a}else return a+="0",a}function E(r){if(c.value[r]==1){let a=0;if(c.value.forEach(t=>{t==1&&(a+=1)}),a<=1)return!1;c.value[r]=0}else c.value[r]=1;b.value=b.value+1,U()}function ce(r){v.value=r,b.value=b.value+1,U()}function fe(r){h.value=r,r==1&&i.length==0&&R(15),r==2&&_.length==0&&(v.value<2&&(v.value=2),H(15)),r==3&&m.length==0&&(v.value<3&&(v.value=3),L(15)),b.value=b.value+1,U()}function ae(r){let a="[ ";return c.value[0]==1&&(a+=`Base: ${r[3]} | `),c.value[1]==1&&(a+=`Required: ${r[0]} | `),c.value[2]==1&&(a+=`Needs: ${r[1]} | `),c.value[3]==1&&(a+=`Wants: ${r[2]} | `),a=a.slice(0,a.length-2),a+="]",a}function re(r){let a=0;return c.value[0]==1&&(a+=r[3]),c.value[1]==1&&(a+=r[0]),c.value[2]==1&&(a+=r[1]),c.value[3]==1&&(a+=r[2]),a}function ge(r){return b.value!=Z&&(Z=b.value,S=0),c.value[r]&&(S+=1),!!c.value[r]}function U(){k.groupBy_opt=v.value,k.catagory_actv=c.value,k.view_opt=h.value}function ye(r){if(r==i.length-1)return!1;if(v.value==1)return!0;let a=r;if(!c.value[i[a].num_cat])return!1;let t=a+1;for(;!c.value[i[t].num_cat];)if(t+=1,t==i.length)return!1;if(v.value==2)return i[a].date.day!=i[t].date.day||i[a].date.month!=i[t].date.month?!0:i[a].date.year!=i[t].date.year;if(v.value==3)return i[a].date.month!=i[t].date.month?!0:i[a].date.year!=i[t].date.year;if(v.value==4)return i[a].date.year!=i[t].date.year}function he(r){if(r==_.length-1)return!1;if(v.value==2)return!0;if(v.value==3)return _[r].date[1]!=_[r+1].date[1]?!0:_[r].date[2]!=_[r+1].date[2];if(v.value==4)return _[r].date[2]!=_[r+1].date[2]}function pe(r){if(r==m.length-1)return!1;if(v.value==3)return!0;if(v.value==4)return m[r].date[1]!=m[r+1].date[1]}function _e(){S<14*u[0]&&B[0]!=!0&&(console.log("RecallingMore"),R(15),u[0]-=1)}function le(r,a,t){let g=new Date(r,a,t);return de[g.getDay()]}return h.value==1?R(15):h.value==2?H(15):h.value==3&&L(15),(r,a)=>(x(),D(I,null,[N(me,{title:"Spend History"}),f("div",null,[N(o(ie),{justify:"space-around"},{default:F(()=>[N(o(O),{quaternary:"",type:"primary",round:"",secondary:"",color:o(C)[o(c)[1]],onClick:a[0]||(a[0]=t=>E(1)),size:"small"},{default:F(()=>[j(" Required ")]),_:1},8,["color"]),N(o(O),{quaternary:"",type:"primary",round:"",secondary:"",color:o(C)[o(c)[2]],onClick:a[1]||(a[1]=t=>E(2)),size:"small"},{default:F(()=>[j(" Needs ")]),_:1},8,["color"]),N(o(O),{quaternary:"",type:"primary",round:"",secondary:"",color:o(C)[o(c)[3]],onClick:a[2]||(a[2]=t=>E(3)),size:"small"},{default:F(()=>[j(" Wants ")]),_:1},8,["color"]),N(o(O),{quaternary:"",type:"primary",round:"",secondary:"",color:o(C)[o(c)[0]],onClick:a[3]||(a[3]=t=>E(0)),size:"small"},{default:F(()=>[j(" Base ")]),_:1},8,["color"])]),_:1}),N(o(ie),{justify:"end","align-items":"center"},{default:F(()=>[Ie,f("div",je,[N(o(se),{value:o(h),size:"small","on-update:value":fe,options:[{label:"Per Item",value:1},{label:"Per Day",value:2},{label:"Per Month",value:3}]},null,8,["value"])]),Oe,f("div",Ve,[N(o(se),{value:o(v),size:"small","on-update:value":ce,options:[{label:"Item",value:1,disabled:o(h)>1},{label:"Day",value:2,disabled:o(h)>2},{label:"Month",value:3,disabled:o(h)>3},{label:"Year",value:4,disabled:o(h)>4}]},null,8,["value","options"])])]),_:1})]),N(o(Ce),{style:{"max-height":"46em"},trigger:r.hover,"on-scroll":t=>{t.target.scrollTop>=300+(o(u)[o(h)-1]-1)*860&&!o(B)[o(h)-1]&&(o(h)==1?R(15):o(h)==2?H(15):o(h)==3&&L(15))}},{default:F(()=>[o(i).length>0||o(_).length>0||o(m).length>0?(x(),D("div",{key:o(b)},[o(h)==1?(x(!0),D(I,{key:0},K(o(i),t=>(x(),D("div",{key:t.id,class:xe({itm_contain:ge(t.num_cat),itm_contain_emty:!o(c)[t.num_cat]}),onClick:g=>r.$router.push({name:"itemDetails",params:{_name:t.name,_catagory:t.catagory+t.ref}})},[f("div",Ge,d(o(S)),1),f("div",Te,d(t.name),1),f("div",Ae,d(t.class),1),f("div",He,d(J(t.value)),1),f("div",Le,d(t.date.day)+"-"+d(z[t.date.month])+"-"+d(t.date.year)+" ("+d(le(t.date.year,t.date.month,t.date.day))+")",1),ye(t.id)?(x(),Q(o(X),{key:0,id:"ndiv"})):M("",!0)],10,We))),128)):M("",!0),o(h)==1&&o(S)==0?(x(),D("div",Je,Ke)):o(h)==2?(x(!0),D(I,{key:2},K(o(_),t=>(x(),D("div",{key:t.day_id,class:"itm_contain"},[f("div",Qe,d(t.day_id+1),1),f("div",Xe,d(t.date[0])+" "+d(z[t.date[1]-1]),1),f("div",Ze,d(ae(t.catagory_spend)),1),f("div",et,d(J(re(t.catagory_spend))),1),f("div",tt,d(t.date[0])+"-"+d(z[t.date[1]-1])+"-"+d(t.date[2])+" ("+d(le(t.date[2],t.date[1]-1,t.date[0]))+")",1),he(t.day_id)?(x(),Q(o(X),{key:0,id:"ndiv"})):M("",!0)]))),128)):o(h)==3?(x(!0),D(I,{key:3},K(o(m),t=>(x(),D("div",{key:t.month_id,class:"itm_contain"},[f("div",at,d(t.month_id+1),1),f("div",rt,d(z[t.date[0]-1])+" "+d(t.date[1]),1),f("div",lt,d(ae(t.catagory_spend)),1),f("div",nt,d(J(re(t.catagory_spend))),1),pe(t.month_id)?(x(),Q(o(X),{key:0,id:"ndiv"})):M("",!0)]))),128)):M("",!0),f("span",ot,d(_e()),1)])):(x(),D("div",st,ut))]),_:1},8,["trigger","on-scroll"])],64))}},mt=$e(dt,[["__scopeId","data-v-48097259"]]);export{mt as default};
