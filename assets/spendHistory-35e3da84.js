import{d as Ce,a as Be,h as Ne,_ as Fe,i as fe,r as M,l as g,x as p,z as N,B as u,s as z,u as a,F as P,A as I,E as Y,I as Se,y as o,q as ae,C as le,j as Me,v as qe,G as ze,H as Re}from"./index-089b5700.js";import{_ as Te}from"./c_header-5e798f4d.js";import{d as Pe,j as ge,q as Ie,G as Ye,H as Ee,J as he,F as A}from"./Button-4c15b35c.js";import{f as Oe,h as Ve}from"./fade-in-scale-up.cssr-bd45e362.js";import{N as ye}from"./Select-e627d914.js";import{N as E}from"./Divider-40a5a849.js";import{N as We}from"./Scrollbar-bbf780ff.js";const Ge={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"};function He(){return Ge}const Ae={name:"Flex",self:He},je=Ae,Le=Object.assign(Object.assign({},ge.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),_e=Ce({name:"Flex",props:Le,setup(C){const{mergedClsPrefixRef:x,mergedRtlRef:n}=Pe(C),m=ge("Flex","-flex",void 0,je,C,x);return{rtlEnabled:Ie("Flex",n,x),mergedClsPrefix:x,margin:Be(()=>{const{size:t}=C;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if(typeof t=="number")return{horizontal:t,vertical:t};const{self:{[Ye("gap",t)]:k}}=m.value,{row:$,col:R}=Ee(k);return{horizontal:he(R),vertical:he($)}})}},render(){const{vertical:C,reverse:x,align:n,inline:m,justify:d,margin:t,wrap:k,mergedClsPrefix:$,rtlEnabled:R}=this,y=Oe(Ve(this),!1);return y.length?Ne("div",{role:"none",class:[`${$}-flex`,R&&`${$}-flex--rtl`],style:{display:m?"inline-flex":"flex",flexDirection:(()=>C&&!x?"column":C&&x?"column-reverse":!C&&x?"row-reverse":"row")(),justifyContent:d,flexWrap:!k||C?"nowrap":"wrap",alignItems:n,gap:`${t.vertical}px ${t.horizontal}px`}},y):null}});const j=C=>(ze("data-v-7a478454"),C=C(),Re(),C),Je=j(()=>u("span",{class:"dropdownTitle"},"View: ",-1)),Ue={style:{width:"30%","margin-top":"10px","padding-bottom":"10px"}},Ke=j(()=>u("span",{class:"dropdownTitle"},"Group By: ",-1)),Qe={style:{width:"27%","margin-top":"10px","padding-bottom":"10px"}},Xe=["onClick"],Ze={id:"itm_id"},et={id:"itm_name"},tt={id:"itm_cls"},at={id:"itm_amt"},lt={id:"itm_dte"},rt={id:"itm_id"},nt={id:"itm_name"},st={id:"itm_cls"},it={id:"itm_amt"},ot={id:"itm_dte"},dt={id:"itm_id"},ut={id:"itm_name"},ct={id:"itm_cls"},ft={id:"itm_amt"},ht={key:3},yt=["onClick"],_t={id:"itm_name"},gt={id:"itm_cls"},mt=["onClick"],vt=j(()=>u("div",{id:"itm_id"},"Total",-1)),pt={id:"itm_name"},kt={key:0,id:"itm_cls"},bt={key:1,id:"itm_cls"},$t={key:2,id:"itm_amt"},wt={key:3,id:"itm_amt"},xt={id:"itm_dte"},Dt={key:4},Ct=j(()=>u("h2",{style:{"text-align":"center",color:"gray"}},"NO SPENDING FOUND",-1)),Bt={style:{display:"none"}},Nt={__name:"spendHistory",setup(C){const x=fe("$globaldata"),n=fe("$data");let m=0,d=[],t=[[],[],[]],k=[],$=[],R=M(!1),y=M(""),L=M(!1),_=[0,0,0],T=[0,0,0],O=0,re=0,ne=0,w=M(0),b=M(x.groupBy_opt),c=M(x.view_opt),f=M(x.catagory_actv),V=M(["#444444","#01700c"]),i=new Date(Date.now()),J=0,U=0,K=0,Q=0,se=15;const W=["Jan","Feb","Mar","Aprl","May","June","July","Aug","Sept","Oct","Nov","Dec"],me=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];t[0][0]=n.required.length,t[1][0]=n.needs.length,t[2][0]=n.wants.length;let ie=n.base.length;for(let l=0;l<=t[0][0]-1;l++)t[0].push(n.required[l].track.length);for(let l=0;l<=t[1][0]-1;l++)t[1].push(n.needs[l].track.length);for(let l=0;l<=t[2][0]-1;l++)t[2].push(n.wants[l].track.length);function G(l){let r=!1,e=!1,h=!1,B=!1,D=!1;console.log("rendering");let S=n.history.day[0].date.split("-"),v=Date.parse(`${S[2]}/${S[1]}/${S[0]}`);for(;r!=!0;){if(K!=t[2][0]&&B==!1)for(let s=0;s<=t[2][0]-1;s++)for(;;){if(t[2][t[2][0]-s]<=0){t[2][t[2][0]-s]==0&&(K=K+1,t[2][t[2][0]-s]=-1);break}else if(console.log(`${i.getDate()}-${i.getMonth()+1}-${i.getFullYear()}`),n.wants[t[2][0]-1-s].track[t[2][t[2][0]-s]-1].date==`${i.getDate()}-${i.getMonth()+1}-${i.getFullYear()}`){if(d.push({id:m,ref:t[2][0]-1-s,name:n.wants[t[2][0]-1-s].track[t[2][t[2][0]-s]-1].name,date:{day:i.getDate(),month:i.getMonth(),year:i.getFullYear()},value:n.wants[t[2][0]-1-s].track[t[2][t[2][0]-s]-1].value,class:"Wants > "+n.wants[t[2][0]-1-s].name,catagory:"Wants>"+n.wants[t[2][0]-1-s].name,num_cat:3}),m=m+1,t[2][t[2][0]-s]=t[2][t[2][0]-s]-1,m>=l*(_[0]+1)){r=!0,_[0]=_[0]+1;break}}else break;if(r)break}else B=!0;if(r==!0)break;if(U!=t[1][0]&&h==!1)for(let s=0;s<=t[1][0]-1;s++)for(;;){if(t[1][t[1][0]-s]<=0){t[1][t[1][0]-s]==0&&(U=U+1,t[1][t[1][0]-s]=-1);break}else if(n.needs[t[1][0]-1-s].track[t[1][t[1][0]-s]-1].date==`${i.getDate()}-${i.getMonth()+1}-${i.getFullYear()}`){if(d.push({id:m,ref:t[1][0]-1-s,name:n.needs[t[1][0]-1-s].track[t[1][t[1][0]-s]-1].name,date:{day:i.getDate(),month:i.getMonth(),year:i.getFullYear()},value:n.needs[t[1][0]-1-s].track[t[1][t[1][0]-s]-1].value,class:"Needs > "+n.needs[t[1][0]-1-s].name,catagory:"Needs>"+n.needs[t[1][0]-1-s].name,num_cat:2}),m=m+1,t[1][t[1][0]-s]=t[1][t[1][0]-s]-1,m>=l*(_[0]+1)){r=!0,_[0]=_[0]+1;break}}else break;if(r)break}else h=!0;if(r==!0)break;if(J!=t[0][0]&&e==!1)for(let s=0;s<=t[0][0]-1;s++)for(;;){if(t[0][t[0][0]-s]<=0){t[0][t[0][0]-s]==0&&(J=J+1,t[0][t[0][0]-s]=-1);break}else if(console.log(`${i.getDate()}-${i.getMonth()+1}-${i.getFullYear()}`),n.required[t[0][0]-1-s].track[t[0][t[0][0]-s]-1].date==`${i.getDate()}-${i.getMonth()+1}-${i.getFullYear()}`){if(d.push({id:m,ref:t[0][0]-1-s,name:n.required[t[0][0]-1-s].name,date:{day:i.getDate(),month:i.getMonth(),year:i.getFullYear()},value:n.required[t[0][0]-1-s].track[t[0][t[0][0]-s]-1].value,class:"Required",catagory:"Required",num_cat:1}),m=m+1,t[0][t[0][0]-s]=t[0][t[0][0]-s]-1,m>=l*(_[0]+1)){r=!0,_[0]=_[0]+1;break}}else break;if(r)break}else e=!0;if(r==!0)break;if(Q!=ie&&D==!1){for(let s=ie-1;s>=0;s--)if(console.log(`${i.getDate()}-${i.getMonth()+1}-${i.getFullYear()}`),n.base[s].init==`${i.getDate()}-${i.getMonth()+1}-${i.getFullYear()}`&&(d.push({id:m,ref:s,name:n.base[s].name,date:{day:i.getDate(),month:i.getMonth(),year:i.getFullYear()},value:n.base[s].value,class:"Base",catagory:"Base",num_cat:0}),m=m+1,Q=Q+1,m>=l*(_[0]+1))){r=!0,_[0]=_[0]+1;break}}else D=!0;if(i.valueOf()<v){T[0]=!0,console.log("explict break!");break}if(e&&h&&B&&D){T[0]=!0,console.log("out of gas");break}i.setDate(i.getDate()-1)}w.value=w.value+1}function X(l){for(let r=_[1]*l+ne;k.length<(_[1]+1)*l;r++){if(r>n.history.day.length-1){T[1]=!0,console.log("out of gas!!");break}if(n.history.day[n.history.day.length-r-1].spend[0]==0&&n.history.day[n.history.day.length-r-1].spend[4]==0){ne+=1;continue}k.push({day_id:k.length,date:n.history.day[n.history.day.length-r-1].date.split("-"),catagory_spend:n.history.day[n.history.day.length-r-1].spend.slice(1)})}_[1]+=1,w.value=w.value+1}function Z(l){let r,e,h=0,B=!1,D=_[2]*l;for(let S=0;$.length<(_[2]+1)*l;S++){let v=[0,0,0,0];if(D+h>=n.history.day.length-1){B||$.push({month_id:$.length,date:n.history.day[0].date.split("-").slice(1),catagory_spend:n.history.day[0].spend.slice(1)}),T[2]=!0,console.log("out of gas!!");break}for(;;){if(v.forEach((s,ce)=>{v[ce]+=n.history.day[n.history.day.length-1-D-h].spend[ce+1]}),D+h>n.history.day.length-2){B=!0;break}if(r=n.history.day[n.history.day.length-1-D-h].date.split("-"),e=n.history.day[n.history.day.length-2-D-h].date.split("-"),h+=1,e[1]!=r[1]||e[2]!=e[2]){B=!1;break}}v[0]=q(v[0]),v[1]=q(v[1]),v[2]=q(v[2]),v[3]=q(v[3]),$.push({month_id:$.length,date:n.history.day[n.history.day.length-D-h].date.split("-").slice(1),catagory_spend:v})}_[2]+=1,w.value=w.value+1}function ve(l){y.value=l,n[l].length==0?L.value=!0:L.value=!1,R.value=!0}function F(l){let r="â‚¹";if(l){let e=l.toString(),h="",B=e.indexOf(".");B!=-1&&(h=e.slice(B),e=e.slice(0,B));let D=!1,S=e.length-1;S%2!=0&&(r=r+e.substring(0,1)+",",S-=1,D=!0);for(let v=0;v<S;v+=2)r=r+e.substring(v+D,v+D+2)+",";return r=r.slice(0,r.length-1),r+=e.substring(e.length-1,e.length-0),B!=-1?r+h:r}else return r+="0",r}function H(l){if(f.value[l]==1){let r=0;if(f.value.forEach(e=>{e==1&&(r+=1)}),r<=1)return!1;f.value[l]=0}else f.value[l]=1;w.value=w.value+1,ee()}function pe(l){b.value=l,ee(),w.value=w.value+1}function ke(l){c.value=l,l==1&&d.length==0?G(15):l==2&&k.length==0?(b.value<2&&(b.value=2),X(15)):l==3&&$.length==0?(b.value<3&&(b.value=3),Z(15)):l==4&&(b.value=1),ee(),w.value=w.value+1}function oe(l){let r="[ ";return f.value[0]==1&&(r+="B: "+F(l[3])+" | "),f.value[1]==1&&(r+="R: "+F(l[0])+" | "),f.value[2]==1&&(r+="N: "+F(l[1])+" | "),f.value[3]==1&&(r+="W: "+F(l[2])+" | "),r=r.slice(0,r.length-2),r+="]",r}function de(l){let r=0;return f.value[0]==1&&(r+=l[3]),f.value[1]==1&&(r+=l[0]),f.value[2]==1&&(r+=l[1]),f.value[3]==1&&(r+=l[2]),q(r)}function be(l){return w.value!=re&&(re=w.value,O=0),f.value[l]&&(O+=1),!!f.value[l]}function ee(){x.groupBy_opt=b.value,x.catagory_actv=f.value,x.view_opt=c.value}function $e(l){if(l==d.length-1)return!1;if(b.value==1)return!0;let r=l;if(!f.value[d[r].num_cat])return!1;let e=r+1;for(;!f.value[d[e].num_cat];)if(e+=1,e==d.length)return!1;if(b.value==2)return d[r].date.day!=d[e].date.day||d[r].date.month!=d[e].date.month?!0:d[r].date.year!=d[e].date.year;if(b.value==3)return d[r].date.month!=d[e].date.month?!0:d[r].date.year!=d[e].date.year;if(b.value==4)return d[r].date.year!=d[e].date.year}function we(l){if(l==k.length-1)return!1;if(b.value==2)return!0;if(b.value==3)return k[l].date[1]!=k[l+1].date[1]?!0:k[l].date[2]!=k[l+1].date[2];if(b.value==4)return k[l].date[2]!=k[l+1].date[2]}function xe(l){if(l==$.length-1)return!1;if(b.value==3)return!0;if(b.value==4)return $[l].date[1]!=$[l+1].date[1]}function te(l,r){return l.length>=r?l.slice(0,r-3)+"...":l}function De(){O<14*_[0]&&T[0]!=!0&&(console.log("RecallingMore"),G(se),se+=15,_[0]-=1)}function q(l){return Math.round(l*100)/100}function ue(l,r,e){let h=new Date(l,r,e);return me[h.getDay()]}return c.value==1?G(15):c.value==2?X(15):c.value==3&&Z(15),(l,r)=>(g(),p(P,null,[N(Te,{title:"Spend History"}),u("div",null,[N(a(_e),{justify:"space-around",style:{"font-family":"'roboto-medium'"}},{default:z(()=>[N(a(A),{quaternary:"",type:"primary",round:"",secondary:"",color:a(V)[a(f)[1]],onClick:r[0]||(r[0]=e=>H(1)),size:"small"},{default:z(()=>[I(" Required ")]),_:1},8,["color"]),N(a(A),{quaternary:"",type:"primary",round:"",secondary:"",color:a(V)[a(f)[2]],onClick:r[1]||(r[1]=e=>H(2)),size:"small"},{default:z(()=>[I(" Needs ")]),_:1},8,["color"]),N(a(A),{quaternary:"",type:"primary",round:"",secondary:"",color:a(V)[a(f)[3]],onClick:r[2]||(r[2]=e=>H(3)),size:"small"},{default:z(()=>[I(" Wants ")]),_:1},8,["color"]),N(a(A),{quaternary:"",type:"primary",round:"",secondary:"",color:a(V)[a(f)[0]],onClick:r[3]||(r[3]=e=>H(0)),size:"small"},{default:z(()=>[I(" Base ")]),_:1},8,["color"])]),_:1}),N(a(_e),{justify:"end","align-items":"center"},{default:z(()=>[Je,u("div",Ue,[N(a(ye),{value:a(c),size:"small","on-update:value":ke,options:[{label:"Per Item",value:1},{label:"Per Day",value:2},{label:"Per Month",value:3},{label:"Per Template",value:4}]},null,8,["value"])]),Ke,u("div",Qe,[N(a(ye),{value:a(b),size:"small","on-update:value":pe,options:[{label:"Item",value:1,disabled:a(c)>1&&a(c)!=4},{label:"Day",value:2,disabled:a(c)>2||a(c)==4},{label:"Month",value:3,disabled:a(c)>3||a(c)==4},{label:"Year",value:4,disabled:a(c)>4||a(c)==4}]},null,8,["value","options"])])]),_:1})]),N(a(We),{style:{"max-height":"46em"},trigger:l.hover,"on-scroll":e=>{e.target.scrollTop>=300+(a(_)[a(c)-1]-1)*860&&!a(T)[a(c)-1]&&(a(c)==1?G(15):a(c)==2?X(15):a(c)==3&&Z(15))}},{default:z(()=>[(g(),p("div",{key:a(w)},[a(c)==1&&a(d).length>0?(g(!0),p(P,{key:0},Y(a(d),e=>(g(),p("div",{key:e.id,class:Se({itm_contain:be(e.num_cat),itm_contain_emty:!a(f)[e.num_cat]}),onClick:h=>l.$router.push({name:"itemDetails",params:{_name:e.name,_catagory:e.catagory+"\0"+e.ref}})},[u("div",Ze,o(a(O)),1),u("div",et,o(te(e.name,25)),1),u("div",tt,o(te(e.class,45)),1),u("div",at,o(F(e.value)),1),u("div",lt,o(e.date.day)+"-"+o(W[e.date.month])+"-"+o(e.date.year)+" ("+o(ue(e.date.year,e.date.month,e.date.day))+")",1),$e(e.id)?(g(),ae(a(E),{key:0,id:"ndiv"})):le("",!0)],10,Xe))),128)):a(c)==2&&a(k).length>0?(g(!0),p(P,{key:1},Y(a(k),e=>(g(),p("div",{key:e.day_id,class:"itm_contain"},[u("div",rt,o(e.day_id+1),1),u("div",nt,o(e.date[0])+" "+o(W[e.date[1]-1]),1),u("div",st,o(oe(e.catagory_spend)),1),u("div",it,o(F(de(e.catagory_spend))),1),u("div",ot,o(e.date[0])+"-"+o(W[e.date[1]-1])+"-"+o(e.date[2])+" ("+o(ue(e.date[2],e.date[1]-1,e.date[0]))+")",1),we(e.day_id)?(g(),ae(a(E),{key:0,id:"ndiv"})):le("",!0)]))),128)):a(c)==3&&a($).length>0?(g(!0),p(P,{key:2},Y(a($),e=>(g(),p("div",{key:e.month_id,class:"itm_contain"},[u("div",dt,o(e.month_id+1),1),u("div",ut,o(W[e.date[0]-1])+" "+o(e.date[1]),1),u("div",ct,o(oe(e.catagory_spend)),1),u("div",ft,o(F(de(e.catagory_spend))),1),xe(e.month_id)?(g(),ae(a(E),{key:0,id:"ndiv"})):le("",!0)]))),128)):a(c)==4&&a(L)==!1?(g(),p("div",ht,[a(R)?(g(!0),p(P,{key:1},Y(Object.keys(a(n)[a(y)]).slice(0,a(n)[a(y)].length).sort((e,h)=>a(y)!="base"?a(n)[a(y)][h].track.length-a(n)[a(y)][e].track.length:a(n)[a(y)][h].spantill[0]-a(n)[a(y)][e].spantill[0]),e=>(g(),p("div",{onClick:h=>l.$router.push({name:"itemDetails",params:{_name:a(n)[a(y)][e].name,_catagory:a(y)[0].toUpperCase()+a(y).slice(1)+"\0"+e}}),key:e,class:"itm_contain"},[vt,u("div",pt,o(te(a(n)[a(y)][e].name,25)),1),a(y)!="base"?(g(),p("div",kt,"Enteries: "+o(a(n)[a(y)][e].track.length),1)):(g(),p("div",bt,"Base")),a(y)!="base"?(g(),p("div",$t,o(F(q(a(n)[a(y)][e].totalspend))),1)):(g(),p("div",wt,o(F(q(a(n)[a(y)][e].value))),1)),u("div",xt,"Initialized On: "+o(a(n)[a(y)][e].init),1),N(a(E),{id:"ndiv"})],8,mt))),128)):(g(!0),p(P,{key:0},Y(Object.keys(a(n)).slice(0,4),e=>(g(),p("div",{key:e,class:"itm_contain",onClick:h=>ve(e)},[u("div",_t,o(e.toUpperCase()),1),u("div",gt,"Sub Categories: "+o(a(n)[e].length),1),Me(N(a(E),{id:"ndiv"},null,512),[[qe,e!="wants"]])],8,yt))),128))])):(g(),p("div",Dt,[Ct,I(" "+o(console.log(a(c))),1)])),u("span",Bt,o(De()),1)]))]),_:1},8,["trigger","on-scroll"])],64))}},Pt=Fe(Nt,[["__scopeId","data-v-7a478454"]]);export{Pt as default};
