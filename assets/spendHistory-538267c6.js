import{_ as me}from"./c_header-a7a4364d.js";import{d as ve,a as be,h as ke,_ as xe,i as ne,r as C,l as $,x as D,z as N,B as f,s as q,u as o,F as I,A as j,E as U,I as $e,y as d,q as K,C as z,G as we,H as De}from"./index-6cf9dede.js";import{d as Ne,j as ue,q as Be,G as Fe,H as Se,J as oe,F as T}from"./Button-d3be0146.js";import{f as qe,h as Me}from"./fade-in-scale-up.cssr-6011eeec.js";import{N as se}from"./Select-3c0cdea9.js";import{N as Q}from"./Divider-9c2bd8ff.js";import{N as Ce}from"./Scrollbar-c9253648.js";const ze={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},Re=()=>ze,Pe={name:"Flex",self:Re},Ye=Pe,Ee=Object.assign(Object.assign({},ue.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),ie=ve({name:"Flex",props:Ee,setup(x){const{mergedClsPrefixRef:k,mergedRtlRef:n}=Ne(x),g=ue("Flex","-flex",void 0,Ye,x,k);return{rtlEnabled:Be("Flex",n,k),mergedClsPrefix:k,margin:be(()=>{const{size:e}=x;if(Array.isArray(e))return{horizontal:e[0],vertical:e[1]};if(typeof e=="number")return{horizontal:e,vertical:e};const{self:{[Fe("gap",e)]:_}}=g.value,{row:m,col:u}=Se(_);return{horizontal:oe(u),vertical:oe(m)}})}},render(){const{vertical:x,reverse:k,align:n,inline:g,justify:i,margin:e,wrap:_,mergedClsPrefix:m,rtlEnabled:u}=this,B=qe(Me(this),!1);return B.length?ke("div",{role:"none",class:[`${m}-flex`,u&&`${m}-flex--rtl`],style:{display:g?"inline-flex":"flex",flexDirection:(()=>x&&!k?"column":x&&k?"column-reverse":!x&&k?"row-reverse":"row")(),justifyContent:i,flexWrap:!_||x?"nowrap":"wrap",alignItems:n,gap:`${e.vertical}px ${e.horizontal}px`}},B):null}});const G=x=>(we("data-v-e885ce30"),x=x(),De(),x),Ie=G(()=>f("span",{class:"dropdownTitle"},"View: ",-1)),je={style:{width:"30%","margin-top":"10px","padding-bottom":"10px"}},Te=G(()=>f("span",{class:"dropdownTitle"},"Group By: ",-1)),Ge={style:{width:"27%","margin-top":"10px","padding-bottom":"10px"}},Oe=["onClick"],Ve={id:"itm_id"},We={id:"itm_name"},He={id:"itm_cls"},Ae={id:"itm_amt"},Le={id:"itm_dte"},Je={key:1},Ue=G(()=>f("h2",{style:{"text-align":"center",color:"gray"}},"NO SPENDING FOUND",-1)),Ke=[Ue],Qe={id:"itm_id"},Xe={id:"itm_name"},Ze={id:"itm_cls"},et={id:"itm_amt"},tt={id:"itm_dte"},at={id:"itm_id"},lt={id:"itm_name"},rt={id:"itm_cls"},nt={id:"itm_amt"},ot={style:{display:"none"}},st={key:1},it=G(()=>f("h2",{style:{"text-align":"center",color:"gray"}},"NO SPENDING FOUND",-1)),ut=[it],dt={__name:"spendHistory",setup(x){const k=ne("$globaldata"),n=ne("$data");let g=0,i=[],e=[[],[],[]],_=[],m=[],u=[0,0,0],B=[0,0,0],M=0,X=0,Z=0,b=C(0),v=C(k.groupBy_opt),h=C(k.view_opt),c=C(k.catagory_actv),R=C(["#444444","#01700c"]),s=new Date(Date.now()),O=0,V=0,W=0,H=0;const P=["Jan","Feb","Mar","Aprl","May","June","July","Aug","Sept","Oct","Nov","Dec"],de=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];e[0][0]=n.required.length,e[1][0]=n.needs.length,e[2][0]=n.wants.length;let ee=n.base.length;for(let l=0;l<=e[0][0]-1;l++)e[0].push(n.required[l].track.length);for(let l=0;l<=e[1][0]-1;l++)e[1].push(n.needs[l].track.length);for(let l=0;l<=e[2][0]-1;l++)e[2].push(n.wants[l].track.length);function Y(l){let a=!1,t=!1,y=!1,p=!1,w=!1;console.log("rendering");let S=n.history.day[0].date.split("-"),re=Date.parse(`${S[2]}/${S[1]}/${S[0]}`);for(;a!=!0;){if(W!=e[2][0]&&p==!1)for(let r=0;r<=e[2][0]-1;r++)for(;;){if(e[2][e[2][0]-r]<=0){e[2][e[2][0]-r]==0&&(W=W+1,e[2][e[2][0]-r]=-1);break}else if(console.log(`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`),n.wants[e[2][0]-1-r].track[e[2][e[2][0]-r]-1].date==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`){if(i.push({id:g,ref:e[2][0]-1-r,name:n.wants[e[2][0]-1-r].track[e[2][e[2][0]-r]-1].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.wants[e[2][0]-1-r].track[e[2][e[2][0]-r]-1].value,class:"Wants > "+n.wants[e[2][0]-1-r].name,catagory:"Wants>"+n.wants[e[2][0]-1-r].name,num_cat:3}),g=g+1,e[2][e[2][0]-r]=e[2][e[2][0]-r]-1,g>=l*(u[0]+1)){a=!0,u[0]=u[0]+1;break}}else break;if(a)break}else p=!0;if(a==!0)break;if(V!=e[1][0]&&y==!1)for(let r=0;r<=e[1][0]-1;r++)for(;;){if(e[1][e[1][0]-r]<=0){e[1][e[1][0]-r]==0&&(V=V+1,e[1][e[1][0]-r]=-1);break}else if(n.needs[e[1][0]-1-r].track[e[1][e[1][0]-r]-1].date==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`){if(i.push({id:g,ref:e[1][0]-1-r,name:n.needs[e[1][0]-1-r].track[e[1][e[1][0]-r]-1].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.needs[e[1][0]-1-r].track[e[1][e[1][0]-r]-1].value,class:"Needs > "+n.needs[e[1][0]-1-r].name,catagory:"Needs>"+n.needs[e[1][0]-1-r].name,num_cat:2}),g=g+1,e[1][e[1][0]-r]=e[1][e[1][0]-r]-1,g>=l*(u[0]+1)){a=!0,u[0]=u[0]+1;break}}else break;if(a)break}else y=!0;if(a==!0)break;if(O!=e[0][0]&&t==!1)for(let r=0;r<=e[0][0]-1;r++)for(;;){if(e[0][e[0][0]-r]<=0){e[0][e[0][0]-r]==0&&(O=O+1,e[0][e[0][0]-r]=-1);break}else if(console.log(`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`),n.required[e[0][0]-1-r].track[e[0][e[0][0]-r]-1].date==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`){if(i.push({id:g,ref:e[0][0]-1-r,name:n.required[e[0][0]-1-r].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.required[e[0][0]-1-r].track[e[0][e[0][0]-r]-1].value,class:"Required",catagory:"Required",num_cat:1}),g=g+1,e[0][e[0][0]-r]=e[0][e[0][0]-r]-1,g>=l*(u[0]+1)){a=!0,u[0]=u[0]+1;break}}else break;if(a)break}else t=!0;if(a==!0)break;if(H!=ee&&w==!1){for(let r=ee-1;r>=0;r--)if(console.log(`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`),n.base[r].init==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`&&(i.push({id:g,ref:r,name:n.base[r].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.base[r].value,class:"Base",catagory:"Base",num_cat:0}),g=g+1,H=H+1,g>=l*(u[0]+1))){a=!0,u[0]=u[0]+1;break}}else w=!0;if(s.valueOf()<re){B[0]=!0,console.log("explict break!");break}if(t&&y&&p&&w){B[0]=!0,console.log("out of gas");break}s.setDate(s.getDate()-1)}b.value=b.value+1}function A(l){for(let a=u[1]*l+Z;_.length<(u[1]+1)*l;a++){if(a>n.history.day.length-1){B[1]=!0,console.log("out of gas!!");break}if(n.history.day[n.history.day.length-a-1].spend[0]==0&&n.history.day[n.history.day.length-a-1].spend[4]==0){Z+=1;continue}_.push({day_id:_.length,date:n.history.day[n.history.day.length-a-1].date.split("-"),catagory_spend:n.history.day[n.history.day.length-a-1].spend.slice(1)})}u[1]+=1,b.value=b.value+1}function L(l){let a,t,y=0,p=u[2]*l;for(let w=0;m.length<(u[2]+1)*l;w++){let S=[0,0,0,0];if(p+y+w>n.history.day.length-1){B[2]=!0,console.log("out of gas!!"),a=n.history.day[n.history.day.length-p-y].date.split("-"),t=n.history.day[n.history.day.length+1-p-y].date.split("-"),(t[1]!=a[1]||t[2]!=t[2])&&m.push({month_id:m.length,date:a.slice(1),catagory_spend:n.history.day[n.history.day.length-p-y].spend.slice(1)});break}for(;S.forEach((re,r)=>{S[r]+=n.history.day[n.history.day.length-1-p-y].spend[r+1]}),!(p+y>n.history.day.length-2||(a=n.history.day[n.history.day.length-1-p-y].date.split("-"),t=n.history.day[n.history.day.length-2-p-y].date.split("-"),y+=1,t[1]!=a[1]||t[2]!=t[2])););m.push({month_id:m.length,date:n.history.day[n.history.day.length-p-y].date.split("-").slice(1),catagory_spend:S})}u[2]+=1,b.value=b.value+1}function F(l){let a="â‚¹ ";if(l){const t=l.toString();let y=!1,p=t.length-1;p%2!=0&&(a=a+t.substring(0,1)+",",p-=1,y=!0);for(let w=0;w<p;w+=2)a=a+t.substring(w+y,w+y+2)+",";return a=a.slice(0,a.length-1),a+=t.substring(t.length-1,t.length-0),a}else return a+="0",a}function E(l){if(c.value[l]==1){let a=0;if(c.value.forEach(t=>{t==1&&(a+=1)}),a<=1)return!1;c.value[l]=0}else c.value[l]=1;b.value=b.value+1,J()}function ce(l){v.value=l,b.value=b.value+1,J()}function fe(l){h.value=l,l==1&&i.length==0&&Y(15),l==2&&_.length==0&&(v.value<2&&(v.value=2),A(15)),l==3&&m.length==0&&(v.value<3&&(v.value=3),L(15)),b.value=b.value+1,J()}function te(l){let a="[ ";return c.value[0]==1&&(a+="B: "+F(l[3])+" | "),c.value[1]==1&&(a+="R: "+F(l[0])+" | "),c.value[2]==1&&(a+="N: "+F(l[1])+" | "),c.value[3]==1&&(a+="W: "+F(l[2])+" | "),a=a.slice(0,a.length-2),a+="]",a}function ae(l){let a=0;return c.value[0]==1&&(a+=l[3]),c.value[1]==1&&(a+=l[0]),c.value[2]==1&&(a+=l[1]),c.value[3]==1&&(a+=l[2]),a}function ye(l){return b.value!=X&&(X=b.value,M=0),c.value[l]&&(M+=1),!!c.value[l]}function J(){k.groupBy_opt=v.value,k.catagory_actv=c.value,k.view_opt=h.value}function ge(l){if(l==i.length-1)return!1;if(v.value==1)return!0;let a=l;if(!c.value[i[a].num_cat])return!1;let t=a+1;for(;!c.value[i[t].num_cat];)if(t+=1,t==i.length)return!1;if(v.value==2)return i[a].date.day!=i[t].date.day||i[a].date.month!=i[t].date.month?!0:i[a].date.year!=i[t].date.year;if(v.value==3)return i[a].date.month!=i[t].date.month?!0:i[a].date.year!=i[t].date.year;if(v.value==4)return i[a].date.year!=i[t].date.year}function he(l){if(l==_.length-1)return!1;if(v.value==2)return!0;if(v.value==3)return _[l].date[1]!=_[l+1].date[1]?!0:_[l].date[2]!=_[l+1].date[2];if(v.value==4)return _[l].date[2]!=_[l+1].date[2]}function _e(l){if(l==m.length-1)return!1;if(v.value==3)return!0;if(v.value==4)return m[l].date[1]!=m[l+1].date[1]}function pe(){M<14*u[0]&&B[0]!=!0&&(console.log("RecallingMore"),Y(15),u[0]-=1)}function le(l,a,t){let y=new Date(l,a,t);return de[y.getDay()]}return h.value==1?Y(15):h.value==2?A(15):h.value==3&&L(15),(l,a)=>($(),D(I,null,[N(me,{title:"Spend History"}),f("div",null,[N(o(ie),{justify:"space-around",style:{"font-family":"'roboto-medium'"}},{default:q(()=>[N(o(T),{quaternary:"",type:"primary",round:"",secondary:"",color:o(R)[o(c)[1]],onClick:a[0]||(a[0]=t=>E(1)),size:"small"},{default:q(()=>[j(" Required ")]),_:1},8,["color"]),N(o(T),{quaternary:"",type:"primary",round:"",secondary:"",color:o(R)[o(c)[2]],onClick:a[1]||(a[1]=t=>E(2)),size:"small"},{default:q(()=>[j(" Needs ")]),_:1},8,["color"]),N(o(T),{quaternary:"",type:"primary",round:"",secondary:"",color:o(R)[o(c)[3]],onClick:a[2]||(a[2]=t=>E(3)),size:"small"},{default:q(()=>[j(" Wants ")]),_:1},8,["color"]),N(o(T),{quaternary:"",type:"primary",round:"",secondary:"",color:o(R)[o(c)[0]],onClick:a[3]||(a[3]=t=>E(0)),size:"small"},{default:q(()=>[j(" Base ")]),_:1},8,["color"])]),_:1}),N(o(ie),{justify:"end","align-items":"center"},{default:q(()=>[Ie,f("div",je,[N(o(se),{value:o(h),size:"small","on-update:value":fe,options:[{label:"Per Item",value:1},{label:"Per Day",value:2},{label:"Per Month",value:3}]},null,8,["value"])]),Te,f("div",Ge,[N(o(se),{value:o(v),size:"small","on-update:value":ce,options:[{label:"Item",value:1,disabled:o(h)>1},{label:"Day",value:2,disabled:o(h)>2},{label:"Month",value:3,disabled:o(h)>3},{label:"Year",value:4,disabled:o(h)>4}]},null,8,["value","options"])])]),_:1})]),N(o(Ce),{style:{"max-height":"46em"},trigger:l.hover,"on-scroll":t=>{t.target.scrollTop>=300+(o(u)[o(h)-1]-1)*860&&!o(B)[o(h)-1]&&(o(h)==1?Y(15):o(h)==2?A(15):o(h)==3&&L(15))}},{default:q(()=>[o(i).length>0||o(_).length>0||o(m).length>0?($(),D("div",{key:o(b)},[o(h)==1?($(!0),D(I,{key:0},U(o(i),t=>($(),D("div",{key:t.id,class:$e({itm_contain:ye(t.num_cat),itm_contain_emty:!o(c)[t.num_cat]}),onClick:y=>l.$router.push({name:"itemDetails",params:{_name:t.name,_catagory:t.catagory+t.ref}})},[f("div",Ve,d(o(M)),1),f("div",We,d(t.name),1),f("div",He,d(t.class),1),f("div",Ae,d(F(t.value)),1),f("div",Le,d(t.date.day)+"-"+d(P[t.date.month])+"-"+d(t.date.year)+" ("+d(le(t.date.year,t.date.month,t.date.day))+")",1),ge(t.id)?($(),K(o(Q),{key:0,id:"ndiv"})):z("",!0)],10,Oe))),128)):z("",!0),o(h)==1&&o(M)==0?($(),D("div",Je,Ke)):o(h)==2?($(!0),D(I,{key:2},U(o(_),t=>($(),D("div",{key:t.day_id,class:"itm_contain"},[f("div",Qe,d(t.day_id+1),1),f("div",Xe,d(t.date[0])+" "+d(P[t.date[1]-1]),1),f("div",Ze,d(te(t.catagory_spend)),1),f("div",et,d(F(ae(t.catagory_spend))),1),f("div",tt,d(t.date[0])+"-"+d(P[t.date[1]-1])+"-"+d(t.date[2])+" ("+d(le(t.date[2],t.date[1]-1,t.date[0]))+")",1),he(t.day_id)?($(),K(o(Q),{key:0,id:"ndiv"})):z("",!0)]))),128)):o(h)==3?($(!0),D(I,{key:3},U(o(m),t=>($(),D("div",{key:t.month_id,class:"itm_contain"},[f("div",at,d(t.month_id+1),1),f("div",lt,d(P[t.date[0]-1])+" "+d(t.date[1]),1),f("div",rt,d(te(t.catagory_spend)),1),f("div",nt,d(F(ae(t.catagory_spend))),1),_e(t.month_id)?($(),K(o(Q),{key:0,id:"ndiv"})):z("",!0)]))),128)):z("",!0),f("span",ot,d(pe()),1)])):($(),D("div",st,ut))]),_:1},8,["trigger","on-scroll"])],64))}},mt=xe(dt,[["__scopeId","data-v-e885ce30"]]);export{mt as default};
