import{_ as _e,I as ke,i as we,r,l as W,q as Ne,s as o,u as p,x as n,y as R,j as w,v as N,F as qe,D as X,z as $,A as ee,B as xe,E as De,G as Se}from"./index-a9527854.js";import{_ as Ie}from"./c_header-f47adda6.js";import{N as A,a as ne,b as oe,c as D,d as Ce}from"./Space-e4fcd4c2.js";import{N as le}from"./Input-f4262538.js";import{N as re}from"./Select-9f95d0b8.js";import{N as ae}from"./Divider-a7db61d5.js";import{N as $e,c as Ee}from"./Switch-3d798b87.js";import{B as Te}from"./Button-8d32fee1.js";import"./fade-in-scale-up.cssr-d52b76ed.js";const Oe=z=>(De("data-v-72ce9982"),z=z(),Se(),z),Ue={style:{"margin-left":"15px","margin-right":"15px"}},Be={style:{"font-size":"medium"}},Ve=Oe(()=>R("div",null,"Input New Value",-1)),Fe={style:{width:"100%","text-align":"center","margin-top":"20px"}},Ae={__name:"addExpense",setup(z){const ie=ke(),e=we("$data"),u=r(""),l=r(""),d=r(""),s=r(null),ue=r(!0),f=r(!0),S=r(!1),E=r(!1),i=r([!1,!1,!1,!1]),_=r([!1,!1,!1]),Y=r(!0),O=r([null,null]),G=r([]),H=r(!1),h=r(""),g=r(""),L=r(!1),m=r(!1),te=r(!1),j=r(),J=r(!1);let ve="",I=new Date,de=`${I.getDate()}-${I.getMonth()+1}-${I.getFullYear()}`;const fe=[{label:"Base",value:"base"},{label:"Required",value:"required"},{label:"Needs",value:"needs"},{label:"Wants",value:"wants"}];let U=[];function q(a){i.value[0]=a===1,i.value[1]=a===2,i.value[2]=a===3,i.value[3]=a===4}function y(a){_.value[0]=a===1,_.value[1]=a===2,_.value[2]=a===3}function pe(){if(U=[],ue.value=!1,E.value=!1,S.value=!1,f.value=!0,L.value=!1,m.value=!1,l.value="",q(5),u.value!="base")for(let a=0;a+1<=e[u.value].length;a++)console.log(e[u.value][a].name),U.push({label:e[u.value][a].name,value:a+2});U.push({label:"New Category",value:1}),console.log(U)}function he(){f.value=!0,l.value==1?(E.value=!0,S.value=!0,u.value=="base"?q(1):u.value=="required"?(te.value=!0,q(2)):u.value=="needs"?q(3):q(4)):(S.value=!1,E.value=!1,te.value=!1,q(0),y(0),u.value=="needs"&&(E.value=!0,S.value=!1,q(3)),u.value=="wants"&&(E.value=!0,S.value=!1,q(4))),L.value=!0,x(!0)}function x(a){a&&(u.value=="base"?(console.log(O.value),d.value!=""&&O.value?(console.log("yo"),f.value=!1,y(1)):(f.value=!0,y(0))):u.value=="required"?(console.log(d.value),l.value==1?d.value!=""?(f.value=!1,y(2)):(f.value=!0,y(0)):l.value!=0?(console.log("inhere!!!"),console.log(l.value),f.value=!1,y(2)):(f.value=!0,y(0))):h.value!=""&&g.value!=""?l.value==1?d.value!=""?(f.value=!1,y(3)):(f.value=!0,y(0)):(f.value=!1,y(3)):(f.value=!0,y(0)),m.value&&(j.value||(f.value=!0)))}function ce(a){a.length>=7?H.value=!0:(G.value=a,x(i.value[1]))}function ge(){let a=!1,t={};console.log(_.value);let v=de,C=[1],V=[s.value],M=I,k=null,K=!1;if(m.value&&(M=new Date(j.value),v=`${M.getDate()}-${M.getMonth()+1}-${M.getFullYear()}`),!_.value[0]){let c,T=0;if(l.value!=1){c=e[u.value][l.value-2+(l.value===1)].track[e[u.value][l.value-2+(l.value===1)].track.length-1].date.split("-"),T=(M.getFullYear()-parseInt(c[2]))*12+(M.getMonth()-parseInt(c[1])+1);for(let b=0;b<T;b++)e[u.value][l.value-2].valuePerMonth.push(0),e[u.value][l.value-2].enteriesPerMonth.push(0)}else d.value[d.value.length-1]==" "&&(d.value=d.value.slice(0,d.value.length-1));if(m.value){for(let P=1;P<=-T;P++)C.push(0),V.push(0);if(l.value!=1){let P=e[u.value][l.value-2].track.length-1;for(;P>=0;P--)if(!(M.valueOf()<B(e[u.value][l.value-2].track[P].date))){_.value[1]?e.required[l.value-2].track.splice(P+1,0,{date:v,value:s.value}):e[u.value][l.value-2].track.splice(P+1,0,{name:h.value,value:s.value,date:v,mode:g.value});break}for(P==-1&&(_.value[1]?e[u.value][l.value-2].track.splice(0,0,{date:v,value:s.value}):e[u.value][l.value-2].track.splice(0,0,{name:h.value,value:s.value,date:v,mode:g.value}));e[u.value][l.value-2].enteriesPerMonth.length<C.length;)e[u.value][l.value-2].enteriesPerMonth.splice(0,0,0),e[u.value][l.value-2].valuePerMonth.splice(0,0,0);for(;e[u.value][l.value-2].enteriesPerMonth.length>C.length;)C.splice(0,0,0),V.splice(0,0,0);e[u.value][l.value-2].enteriesPerMonth=C.map((F,Q)=>F+e[u.value][l.value-2].enteriesPerMonth[Q]),e[u.value][l.value-2].valuePerMonth=V.map((F,Q)=>F+e[u.value][l.value-2].valuePerMonth[Q]),M.valueOf()<B(e[u.value][l.value-2].init)&&(e[u.value][l.value-2].init=v),K=!0}let b=[s.value,0,0,0,0];for(u.value=="required"?b[1]+=s.value:u.value=="needs"?b[2]+=s.value:b[3]+=s.value,k=e.history.day.length-1;k>=0&&!(M.valueOf()>=B(e.history.day[k].date));k--);k==-1?e.history.day.splice(0,0,{date:v,spend:b}):e.history.day[k].date==v?e.history.day[k].spend=e.history.day[k].spend.map((P,F)=>P+b[F]):e.history.day.splice(k+1,0,{date:v,spend:b})}}if(_.value[0]){if(t[e.base.length]={name:d.value,value:s.value,spantill:[O.value[0],O.value[1]],init:v},m.value){let c=e.history.day.findLastIndex(b=>B(b.date)<=M.valueOf()),T=1;c==-1&&(c=0,T=0),B(e.history.day[c].date)==M.valueOf()?e.history.day[c].spend[4]+=s.value:e.history.day.splice(c+T,0,{date:v,spend:[0,0,0,0,s.value]})}e.history.day[e.history.day.length-1].spend[4]=s.value,e.base.length=e.base.length+1,a=!0}else if(_.value[1]){if(l.value==1)t[e.required.length]={name:d.value,value:s.value,totalspend:s.value,valuePerMonth:V,enteriesPerMonth:C,homelog:Y.value,init:v,excludes:G.value.sort(),track:[{date:v,value:s.value}]},e.required.length=e.required.length+1,a=!0,console.log(t);else if(e.required[l.value-2].totalspend=e.required[l.value-2].totalspend+s.value,!K){e.required[l.value-2].track.push({date:v,value:s.value});let c=e.required[l.value-2].track[e.required[l.value-2].track.length-2].date;se(c,2)<=I.getMonth()?(e.required[l.value-2].valuePerMonth.push(s.value),e.required[l.value-2].enteriesPerMonth.push(1)):(e.required[l.value-2].valuePerMonth[e.required[l.value-2].valuePerMonth.length-1]+=s.value,e.required[l.value-2].enteriesPerMonth[e.required[l.value-2].enteriesPerMonth.length-1]+=1)}m.value||Z(1,s.value)}else{if(h.value[h.value.length-1]==" "&&(h.value=h.value.slice(0,h.value.length-1)),g.value[g.value.length-1]==" "&&(g.value=g.value.slice(0,g.value.length-1)),l.value==1)t[e[u.value].length]={name:d.value,totalspend:s.value,init:v,valuePerMonth:V,enteriesPerMonth:C,track:[{name:h.value,value:s.value,date:v,mode:g.value}]},e[u.value].length=e[u.value].length+1,a=!0;else if(e[u.value][l.value-2].totalspend=e[u.value][l.value-2].totalspend+s.value,!K){e[u.value][l.value-2].track.push({name:h.value,value:s.value,date:v,mode:g.value});let c=e[u.value][l.value-2].track[e[u.value][l.value-2].track.length-2].date;se(c,2)<=I.getMonth()?(e[u.value][l.value-2].valuePerMonth.push(s.value),e[u.value][l.value-2].enteriesPerMonth.push(1)):(e[u.value][l.value-2].valuePerMonth[e[u.value][l.value-2].valuePerMonth.length-1]+=s.value,e[u.value][l.value-2].enteriesPerMonth[e[u.value][l.value-2].enteriesPerMonth.length-1]+=1)}m.value||(u.value=="needs"?Z(2,s.value):Z(3,s.value))}a&&(Object.assign(e[u.value],t),console.log(t)),localStorage.setItem("_DATA_",JSON.stringify(e)),ie.go(-1)}function me(a){return a>=I.valueOf()}function B(a){let t=a.split("-");return Date.parse(`${t[2]}/${t[1]}/${t[0]}`)}function se(a,t){const v=a.split("-");return parseInt(v[t-1])}function Z(a,t){e.history.day[e.history.day.length-1].spend[a]+=t,e.history.day[e.history.day.length-1].spend[0]+=t}function ye(a){a.length>1?a[a.length-1]==" "&&a[a.length-2]==" "||(d.value=a):a[0]!=" "&&(d.value=a),x(S.value)}function Me(){let a=d.value.replaceAll(" ","");for(let t=0;t<e[u.value].length;t++)a==e[u.value][t].name&&(ve="Catagory with this name already exists!",J.value=!0,d.value="")}function be(a){a.length>1?a[a.length-1]==" "&&a[a.length-2]==" "||(h.value=a):a[0]!=" "&&(h.value=a),x(i.value[2]||i.value[3])}function Pe(a){g.value=a.replace("  "," "),x(i.value[2]||i.value[3])}return(a,t)=>(W(),Ne(qe,null,[o(Ie,{title:"Add Expense"}),o(n(A),{vertical:"",size:"large"},{default:p(()=>[o(n(re),{value:u.value,"onUpdate:value":[t[0]||(t[0]=v=>u.value=v),t[1]||(t[1]=v=>pe())],options:fe,placeholder:"Please Select Template"},null,8,["value"]),o(n(re),{value:l.value,"onUpdate:value":[t[2]||(t[2]=v=>l.value=v),t[3]||(t[3]=v=>he())],disabled:ue.value,placeholder:"Please Select Category",options:n(U)},null,8,["value","disabled","options"])]),_:1}),R("div",Ue,[o(n(A),{vertical:""},{default:p(()=>[E.value?(W(),X(n(ae),{key:0},{default:p(()=>[$(" Parameters")]),_:1})):ee("",!0),w(o(n(le),{value:d.value,type:"text",maxlength:"20",placeholder:"Input New Category Name","on-input":ye,"on-blur":Me},null,8,["value"]),[[N,S.value]]),w(o(n(ne),{"on-update:value":v=>{O.value=v,x(i.value[0])},"update-value-on-close":!0,type:"daterange",format:"dd-MMM-yyyy"},null,8,["on-update:value"]),[[N,i.value[0]]]),w(R("div",Be,[$("Enable Homepage Logging "),o(n($e),{value:Y.value,"onUpdate:value":t[4]||(t[4]=v=>Y.value=v),style:{float:"right","margin-top":"3px"}},null,8,["value"])],512),[[N,i.value[1]]])]),_:1}),o(n(A),{vertical:""},{default:p(()=>[o(n(oe),{show:H.value,"onUpdate:show":t[5]||(t[5]=v=>H.value=v),preset:"dialog",title:"Dialog"},{header:p(()=>[Ve]),_:1},8,["show"]),w(o(n(le),{value:h.value,type:"text",maxlength:"20",placeholder:"Input Spend Name","on-input":be},null,8,["value"]),[[N,i.value[2]||i.value[3]]]),w(o(n(le),{value:g.value,type:"text",maxlength:"20",placeholder:"Input Mode ","on-input":Pe},null,8,["value"]),[[N,i.value[2]||i.value[3]]]),w(o(n(D),{checked:m.value,"onUpdate:checked":t[6]||(t[6]=v=>m.value=v),style:{"margin-top":"12px"},"on-update:value":x(!0)},{default:p(()=>[$(" Add to a Past Date ")]),_:1},8,["checked","on-update:value"]),[[N,L.value]]),i.value[1]?(W(),X(n(ae),{key:0},{default:p(()=>[$(" Exception Days")]),_:1})):ee("",!0)]),_:1}),w(o(n(Ce),{value:G.value,"onUpdate:value":t[7]||(t[7]=v=>G.value=v),"on-update:value":ce},{default:p(()=>[o(n(A),{"item-style":"display: flex;"},{default:p(()=>[o(n(D),{value:"1",label:"Mon"}),o(n(D),{value:"2",label:"Tue"}),o(n(D),{value:"3",label:"Wed"}),o(n(D),{value:"4",label:"Thu"}),o(n(D),{value:"5",label:"Fri"}),o(n(D),{value:"6",label:"Sat"}),o(n(D),{value:"0",label:"Sun"})]),_:1})]),_:1},8,["value"]),[[N,i.value[1]]]),o(n(A),{vertical:""},{default:p(()=>[m.value?(W(),X(n(ae),{key:0},{default:p(()=>[$(" Past Date ")]),_:1})):ee("",!0),w(o(n(ne),{value:j.value,"onUpdate:value":t[8]||(t[8]=v=>j.value=v),type:"date","is-date-disabled":me,"on-confirm":x(m.value),format:"dd-MMM-yyyy",actions:["clear"]},null,8,["value","on-confirm"]),[[N,m.value]]),o(n(Ee),{disabled:f.value,id:"inp_num",value:s.value,"onUpdate:value":t[9]||(t[9]=v=>s.value=v),placeholder:"O",min:0,"show-button":!1,size:"large"},{prefix:p(()=>[$(" â‚¹ ")]),_:1},8,["disabled","value"]),R("div",Fe,[w(o(n(Te),{onClick:t[10]||(t[10]=v=>ge()),type:"primary"},{default:p(()=>[$(" Create Value ")]),_:1},512),[[N,s.value]])])]),_:1})]),o(n(oe),{show:J.value,"onUpdate:show":t[11]||(t[11]=v=>J.value=v),preset:"dialog",title:"Dialog"},{header:p(()=>[R("div",null,xe(n(ve)),1)]),_:1},8,["show"])],64))}},Ze=_e(Ae,[["__scopeId","data-v-72ce9982"]]);export{Ze as default};
