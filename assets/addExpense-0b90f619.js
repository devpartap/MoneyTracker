import{_ as ke,J as we,i as Ne,r as i,l as H,x as Se,z as o,s as f,u as v,B as D,j as m,v as b,F as qe,q as ee,A as k,C as le,y as Ce,G as De,H as ze}from"./index-1e0e2f7c.js";import{_ as Ie}from"./c_header-fa2541e1.js";import{N as A,a as oe,b as C,c as $e}from"./Space-161db22d.js";import{N as ae}from"./Input-4d773fad.js";import{N as re}from"./Select-efd8b0a7.js";import{N as te}from"./Divider-33493e42.js";import{b as Fe,N as ie,d as Te}from"./Switch-3a446029.js";import{F as W}from"./Button-6c271e84.js";import"./fade-in-scale-up.cssr-7ff6a637.js";const de=R=>(De("data-v-d5865aba"),R=R(),ze(),R),Be={style:{"margin-left":"20px","margin-right":"20px"}},Ee={class:"optionsStyle"},Ue=de(()=>D("div",null,"Input New Value",-1)),Oe={style:{width:"100%",display:"flex","flex-direction":"column"}},Ve=de(()=>D("br",null,null,-1)),Ae={style:{width:"100%","text-align":"center","margin-top":"10px"}},Re={__name:"addExpense",setup(R){const fe=we(),e=Ne("$data"),u=i(""),a=i(""),d=i(""),n=i(null),ue=i(!0),c=i(!0),z=i(!1),F=i(!1),r=i([!1,!1,!1,!1]),w=i([!1,!1,!1]),Y=i(!0),E=i([null,null]),G=i([]),J=i(!1),h=i(""),p=i(""),L=i(!1),y=i(!1),se=i(!1),j=i(),Z=i(!1);let ve="",I=new Date,pe=`${I.getDate()}-${I.getMonth()+1}-${I.getFullYear()}`;const ce=[{label:"Base",value:"base",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"},{label:"Required",value:"required",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"},{label:"Needs",value:"needs",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"},{label:"Wants",value:"wants",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"}];let T=[];function S(l){r.value[0]=l===1,r.value[1]=l===2,r.value[2]=l===3,r.value[3]=l===4}function M(l){w.value[0]=l===1,w.value[1]=l===2,w.value[2]=l===3}function he(){if(T=[],ue.value=!1,F.value=!1,z.value=!1,c.value=!0,L.value=!1,y.value=!1,a.value="",S(5),u.value!="base"){for(let l=0;l+1<=e[u.value].length;l++){let t=0;e[u.value][l].enteriesPerMonth.forEach(s=>{t+=s}),T.push({label:e[u.value][l].name,value:l+2,style:"font-family: 'roboto-regular';color: rgb(77,77,77);font-size:15px;",totalenty:t})}T.sort((l,t)=>t.totalenty-l.totalenty)}T.push({label:"New Category",value:1,style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:15px;"}),console.log(T)}function ge(){c.value=!0,a.value==1?(F.value=!0,z.value=!0,u.value=="base"?S(1):u.value=="required"?(se.value=!0,S(2)):u.value=="needs"?S(3):S(4)):(z.value=!1,F.value=!1,se.value=!1,S(0),M(0),u.value=="needs"&&(F.value=!0,z.value=!1,S(3)),u.value=="wants"&&(F.value=!0,z.value=!1,S(4))),L.value=!0,q(!0)}function q(l){l&&(u.value=="base"?(console.log(E.value),d.value!=""&&E.value?(c.value=!1,M(1)):(c.value=!0,M(0))):u.value=="required"?(console.log(d.value),a.value==1?d.value!=""?(c.value=!1,M(2)):(c.value=!0,M(0)):a.value!=0?(console.log(a.value),c.value=!1,M(2)):(c.value=!0,M(0))):h.value!=""&&p.value!=""?a.value==1?d.value!=""?(c.value=!1,M(3)):(c.value=!0,M(0)):(c.value=!1,M(3)):(c.value=!0,M(0)),y.value&&(j.value||(c.value=!0)))}function ye(l){l.length>=7?J.value=!0:(G.value=l,q(r.value[1]))}function me(){let l=!1,t={};console.log(w.value);let s=pe,$=[1],O=[n.value],P=I,N=null,Q=!1;if(y.value&&(P=new Date(j.value),s=`${P.getDate()}-${P.getMonth()+1}-${P.getFullYear()}`),!w.value[0]){let g,B=0;if(a.value!=1){g=e[u.value][a.value-2+(a.value===1)].track[e[u.value][a.value-2+(a.value===1)].track.length-1].date.split("-"),B=(P.getFullYear()-parseInt(g[2]))*12+(P.getMonth()-parseInt(g[1])+1);for(let x=0;x<B;x++)e[u.value][a.value-2].valuePerMonth.push(0),e[u.value][a.value-2].enteriesPerMonth.push(0)}else d.value[d.value.length-1]==" "&&(d.value=d.value.slice(0,d.value.length-1));if(y.value){for(let _=1;_<=-B;_++)$.push(0),O.push(0);if(a.value!=1){let _=e[u.value][a.value-2].track.length-1;for(;_>=0;_--)if(!(P.valueOf()<U(e[u.value][a.value-2].track[_].date))){w.value[1]?e.required[a.value-2].track.splice(_+1,0,{date:s,value:n.value}):e[u.value][a.value-2].track.splice(_+1,0,{name:h.value,value:n.value,date:s,mode:p.value});break}for(_==-1&&(w.value[1]?e[u.value][a.value-2].track.splice(0,0,{date:s,value:n.value}):e[u.value][a.value-2].track.splice(0,0,{name:h.value,value:n.value,date:s,mode:p.value}));e[u.value][a.value-2].enteriesPerMonth.length<$.length;)e[u.value][a.value-2].enteriesPerMonth.splice(0,0,0),e[u.value][a.value-2].valuePerMonth.splice(0,0,0);for(;e[u.value][a.value-2].enteriesPerMonth.length>$.length;)$.splice(0,0,0),O.splice(0,0,0);e[u.value][a.value-2].enteriesPerMonth=$.map((V,X)=>V+e[u.value][a.value-2].enteriesPerMonth[X]),e[u.value][a.value-2].valuePerMonth=O.map((V,X)=>V+e[u.value][a.value-2].valuePerMonth[X]),P.valueOf()<U(e[u.value][a.value-2].init)&&(e[u.value][a.value-2].init=s),Q=!0}let x=[n.value,0,0,0,0];for(u.value=="required"?x[1]+=n.value:u.value=="needs"?x[2]+=n.value:x[3]+=n.value,N=e.history.day.length-1;N>=0&&!(P.valueOf()>=U(e.history.day[N].date));N--);N==-1?e.history.day.splice(0,0,{date:s,spend:x}):e.history.day[N].date==s?e.history.day[N].spend=e.history.day[N].spend.map((_,V)=>_+x[V]):e.history.day.splice(N+1,0,{date:s,spend:x})}}if(w.value[0]){if(t[e.base.length]={name:d.value,value:n.value,spantill:[E.value[0],E.value[1]],init:s},y.value){let g=e.history.day.findLastIndex(x=>U(x.date)<=P.valueOf()),B=1;g==-1&&(g=0,B=0),U(e.history.day[g].date)==P.valueOf()?e.history.day[g].spend[4]+=n.value:e.history.day.splice(g+B,0,{date:s,spend:[0,0,0,0,n.value]})}else e.history.day[e.history.day.length-1].spend[4]=n.value;e.base.length=e.base.length+1,l=!0}else if(w.value[1]){if(a.value==1)t[e.required.length]={name:d.value,value:n.value,totalspend:n.value,valuePerMonth:O,enteriesPerMonth:$,homelog:Y.value,init:s,excludes:G.value.sort(),track:[{date:s,value:n.value}]},e.required.length=e.required.length+1,l=!0,console.log(t);else if(e.required[a.value-2].totalspend=e.required[a.value-2].totalspend+n.value,!Q){e.required[a.value-2].track.push({date:s,value:n.value});let g=e.required[a.value-2].track[e.required[a.value-2].track.length-2].date;ne(g,2)<=I.getMonth()?(e.required[a.value-2].valuePerMonth.push(n.value),e.required[a.value-2].enteriesPerMonth.push(1)):(e.required[a.value-2].valuePerMonth[e.required[a.value-2].valuePerMonth.length-1]+=n.value,e.required[a.value-2].enteriesPerMonth[e.required[a.value-2].enteriesPerMonth.length-1]+=1)}y.value||K(1,n.value)}else{if(h.value[h.value.length-1]==" "&&(h.value=h.value.slice(0,h.value.length-1)),p.value[p.value.length-1]==" "&&(p.value=p.value.slice(0,p.value.length-1)),a.value==1)t[e[u.value].length]={name:d.value,totalspend:n.value,init:s,valuePerMonth:O,enteriesPerMonth:$,track:[{name:h.value,value:n.value,date:s,mode:p.value}]},e[u.value].length=e[u.value].length+1,l=!0;else if(e[u.value][a.value-2].totalspend=e[u.value][a.value-2].totalspend+n.value,!Q){e[u.value][a.value-2].track.push({name:h.value,value:n.value,date:s,mode:p.value});let g=e[u.value][a.value-2].track[e[u.value][a.value-2].track.length-2].date;ne(g,2)<=I.getMonth()?(e[u.value][a.value-2].valuePerMonth.push(n.value),e[u.value][a.value-2].enteriesPerMonth.push(1)):(e[u.value][a.value-2].valuePerMonth[e[u.value][a.value-2].valuePerMonth.length-1]+=n.value,e[u.value][a.value-2].enteriesPerMonth[e[u.value][a.value-2].enteriesPerMonth.length-1]+=1)}y.value||(u.value=="needs"?K(2,n.value):K(3,n.value))}l&&(Object.assign(e[u.value],t),console.log(t)),localStorage.setItem("_DATA_",JSON.stringify(e)),fe.go(-1)}function be(l){return l>=I.valueOf()}function U(l){let t=l.split("-");return Date.parse(`${t[2]}/${t[1]}/${t[0]}`)}function ne(l,t){const s=l.split("-");return parseInt(s[t-1])}function K(l,t){e.history.day[e.history.day.length-1].spend[l]+=t,e.history.day[e.history.day.length-1].spend[0]+=t}function Me(l){l.length>1?l[l.length-1]==" "&&l[l.length-2]==" "||(d.value=l):l[0]!=" "&&(d.value=l),q(z.value)}function Pe(){let l=d.value.replaceAll(" ","");for(let t=0;t<e[u.value].length;t++)l==e[u.value][t].name&&(ve="Catagory with this name already exists!",Z.value=!0,d.value="")}function xe(l){l.length>1?l[l.length-1]==" "&&l[l.length-2]==" "||(h.value=l):l[0]!=" "&&(h.value=l),q(r.value[2]||r.value[3])}function _e(l){p.value=l.replace("  "," "),q(r.value[2]||r.value[3])}return(l,t)=>(H(),Se(qe,null,[o(Ie,{title:"Add Expense"}),o(v(A),{vertical:"",size:"large",style:{"margin-left":"7px","margin-right":"7px"}},{default:f(()=>[o(v(re),{value:u.value,"onUpdate:value":[t[0]||(t[0]=s=>u.value=s),t[1]||(t[1]=s=>he())],options:ce,size:"large",id:"selectFeildTemplate",placeholder:"Please Select Template"},null,8,["value"]),o(v(re),{value:a.value,"onUpdate:value":[t[2]||(t[2]=s=>a.value=s),t[3]||(t[3]=s=>ge())],disabled:ue.value,size:"large",id:"selectFeildSvalue",placeholder:"Please Select Category",options:v(T)},null,8,["value","disabled","options"])]),_:1}),D("div",Be,[o(v(A),{vertical:""},{default:f(()=>[F.value?(H(),ee(v(te),{key:0,class:"dividerStyle"},{default:f(()=>[k(" Parameters")]),_:1})):le("",!0),m(o(v(ae),{value:d.value,type:"text",maxlength:"100",size:"large",class:"inputFeild",placeholder:"Input New Category Name","on-input":Me,"on-blur":Pe},null,8,["value"]),[[b,z.value]]),m(o(v(oe),{class:"inputFeild","on-update:value":s=>{E.value=s,q(r.value[0])},"update-value-on-close":!0,size:"large",type:"daterange",format:"dd-MMM-yyyy"},null,8,["on-update:value"]),[[b,r.value[0]]]),m(D("div",Ee,[k("Enable Homepage Viewing "),o(v(Fe),{value:Y.value,"onUpdate:value":t[4]||(t[4]=s=>Y.value=s),style:{float:"right","margin-top":"3px"}},null,8,["value"])],512),[[b,r.value[1]]])]),_:1}),o(v(A),{vertical:""},{default:f(()=>[o(v(ie),{show:J.value,"onUpdate:show":t[5]||(t[5]=s=>J.value=s),preset:"dialog",title:"Dialog"},{header:f(()=>[Ue]),_:1},8,["show"]),m(o(v(ae),{value:h.value,type:"text",maxlength:"100",size:"large",class:"inputFeild",placeholder:"Input Spend Name","on-input":xe},null,8,["value"]),[[b,r.value[2]||r.value[3]]]),D("div",Oe,[m(o(v(ae),{value:p.value,type:"text",maxlength:"100",size:"large",class:"inputFeild",placeholder:"Input Payment Method ","on-input":_e},null,8,["value"]),[[b,r.value[2]||r.value[3]]]),D("div",null,[m(o(v(W),{class:"modeButton",onClick:t[6]||(t[6]=s=>p.value="Card"),circle:"",secondary:"",type:"primary",size:"small"},{default:f(()=>[k("Card")]),_:1},512),[[b,r.value[2]||r.value[3]]]),m(o(v(W),{class:"modeButton",onClick:t[7]||(t[7]=s=>p.value="Cash"),circle:"",secondary:"",type:"primary",size:"small"},{default:f(()=>[k("Cash")]),_:1},512),[[b,r.value[2]||r.value[3]]]),m(o(v(W),{class:"modeButton",onClick:t[8]||(t[8]=s=>p.value="UPI"),circle:"",secondary:"",type:"primary",size:"small"},{default:f(()=>[k("UPI")]),_:1},512),[[b,r.value[2]||r.value[3]]])])]),Ve,m(o(v(C),{checked:y.value,"onUpdate:checked":t[9]||(t[9]=s=>y.value=s),class:"optionsStyle","on-update:value":q(!0)},{default:f(()=>[k(" Add to a Past Date ")]),_:1},8,["checked","on-update:value"]),[[b,L.value]]),r.value[1]?(H(),ee(v(te),{key:0,class:"dividerStyle"},{default:f(()=>[k(" Exception Days")]),_:1})):le("",!0)]),_:1}),m(o(v($e),{value:G.value,"onUpdate:value":t[10]||(t[10]=s=>G.value=s),class:"optionsStyle","on-update:value":ye},{default:f(()=>[o(v(A),{"item-style":"display: flex;"},{default:f(()=>[o(v(C),{value:"1",label:"Mon"}),o(v(C),{value:"2",label:"Tue"}),o(v(C),{value:"3",label:"Wed"}),o(v(C),{value:"4",label:"Thu"}),o(v(C),{value:"5",label:"Fri"}),o(v(C),{value:"6",label:"Sat"}),o(v(C),{value:"0",label:"Sun"})]),_:1})]),_:1},8,["value"]),[[b,r.value[1]]]),o(v(A),{vertical:""},{default:f(()=>[y.value?(H(),ee(v(te),{key:0,class:"dividerStyle"},{default:f(()=>[k(" Past Date ")]),_:1})):le("",!0),m(o(v(oe),{value:j.value,"onUpdate:value":t[11]||(t[11]=s=>j.value=s),type:"date",size:"large",class:"inputFeild","is-date-disabled":be,"on-confirm":q(y.value),format:"dd-MMM-yyyy",actions:["clear"]},null,8,["value","on-confirm"]),[[b,y.value]]),o(v(Te),{disabled:c.value,id:"inp_num",value:n.value,"onUpdate:value":t[12]||(t[12]=s=>n.value=s),placeholder:"O",min:0,"show-button":!1,size:"large",class:"moneyInputStyle"},{prefix:f(()=>[k(" â‚¹ ")]),_:1},8,["disabled","value"]),D("div",Ae,[m(o(v(W),{class:"createButton",onClick:t[13]||(t[13]=s=>me()),type:"primary",size:"large"},{default:f(()=>[k(" Create Value ")]),_:1},512),[[b,n.value]])])]),_:1})]),o(v(ie),{show:Z.value,"onUpdate:show":t[14]||(t[14]=s=>Z.value=s),preset:"dialog",title:"Dialog"},{header:f(()=>[D("div",null,Ce(v(ve)),1)]),_:1},8,["show"])],64))}},Qe=ke(Re,[["__scopeId","data-v-d5865aba"]]);export{Qe as default};
