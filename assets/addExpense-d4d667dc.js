import{_ as De,J as Se,i as Ce,r as i,l as R,x as ze,z as o,s as d,u as v,B as S,j as M,v as b,F as $e,q as W,A as k,C as L,y as re,G as Ie,H as Fe}from"./index-01771ddd.js";import{_ as Be}from"./c_header-a4aa39b2.js";import{N as G,a as ie,b as $,c as Te}from"./Space-3b97500c.js";import{N as te}from"./Input-ccd5baf5.js";import{N as de}from"./Select-19574009.js";import{N as ue}from"./Divider-4ee3629d.js";import{b as Ee,N as fe,d as Oe}from"./Switch-d98a2ed7.js";import{F as U}from"./Button-0ebe5f46.js";import"./fade-in-scale-up.cssr-9d2085d3.js";const pe=j=>(Ie("data-v-3e35deed"),j=j(),Fe(),j),Ue={style:{"margin-left":"20px","margin-right":"20px"}},Ve={class:"optionsStyle"},Ae=pe(()=>S("div",null,"Input New Value",-1)),Ye={style:{width:"100%",display:"flex","flex-direction":"column"}},Je=pe(()=>S("br",null,null,-1)),Re={style:{width:"100%","text-align":"center","margin-top":"10px"}},Ge={__name:"addExpense",setup(j){const he=Se(),e=Ce("$data"),u=i(""),l=i(""),f=i(""),n=i(null),se=i(!0),y=i(!0),I=i(!1),B=i(!1),r=i([!1,!1,!1,!1]),N=i([!1,!1,!1]),Z=i(!0),V=i([null,null]),H=i([]),K=i(!1),g=i(""),h=i(""),Q=i(!1),m=i(!1),ve=i(!1),T=i(),X=i(!1);let ne="",P=new Date,ce=`${P.getDate()}-${P.getMonth()+1}-${P.getFullYear()}`;const ye=["Jan","Feb","Mar","Aprl","May","June","July","Aug","Sept","Oct","Nov","Dec"],ge=[{label:"Base",value:"base",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"},{label:"Required",value:"required",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"},{label:"Needs",value:"needs",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"},{label:"Wants",value:"wants",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"}];let E=[];function C(a){r.value[0]=a===1,r.value[1]=a===2,r.value[2]=a===3,r.value[3]=a===4}function x(a){N.value[0]=a===1,N.value[1]=a===2,N.value[2]=a===3}function me(){if(E=[],se.value=!1,B.value=!1,I.value=!1,y.value=!0,Q.value=!1,m.value=!1,l.value="",C(5),u.value!="base"){for(let a=0;a+1<=e[u.value].length;a++){let t=0;e[u.value][a].enteriesPerMonth.forEach(s=>{t+=s}),t=q(t),E.push({label:e[u.value][a].name,value:a+2,style:"font-family: 'roboto-regular';color: rgb(77,77,77);font-size:15px;",totalenty:t})}E.sort((a,t)=>t.totalenty-a.totalenty)}E.push({label:"New Category",value:1,style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:15px;"}),console.log(E)}function Me(){y.value=!0,l.value==1?(B.value=!0,I.value=!0,u.value=="base"?C(1):u.value=="required"?(ve.value=!0,C(2)):u.value=="needs"?C(3):C(4)):(I.value=!1,B.value=!1,ve.value=!1,C(0),x(0),u.value=="needs"&&(B.value=!0,I.value=!1,C(3)),u.value=="wants"&&(B.value=!0,I.value=!1,C(4))),Q.value=!0,z(!0)}function z(a){a&&(u.value=="base"?(console.log(V.value),f.value!=""&&V.value[0]!=null?(y.value=!1,x(1)):(y.value=!0,x(0))):u.value=="required"?(console.log(f.value),l.value==1?f.value!=""?(y.value=!1,x(2)):(y.value=!0,x(0)):l.value!=0?(console.log(l.value),y.value=!1,x(2)):(y.value=!0,x(0))):g.value!=""&&h.value!=""?l.value==1?f.value!=""?(y.value=!1,x(3)):(y.value=!0,x(0)):(y.value=!1,x(3)):(y.value=!0,x(0)),m.value&&(T.value||(y.value=!0)))}function be(a){a.length>=7?K.value=!0:(H.value=a,z(r.value[1]))}function Pe(){let a=!1,t={};console.log(N.value);let s=ce,F=[1];n.value=q(n.value);let Y=[n.value],_=P,D=null,le=!1;if(m.value&&(_=new Date(T.value),s=`${_.getDate()}-${_.getMonth()+1}-${_.getFullYear()}`),!N.value[0]){let c,O=0;if(l.value!=1){c=e[u.value][l.value-2+(l.value===1)].track[e[u.value][l.value-2+(l.value===1)].track.length-1].date.split("-"),O=(_.getFullYear()-parseInt(c[2]))*12+(_.getMonth()-parseInt(c[1])+1);for(let p=0;p<O;p++)e[u.value][l.value-2].valuePerMonth.push(0),e[u.value][l.value-2].enteriesPerMonth.push(0)}else f.value[f.value.length-1]==" "&&(f.value=f.value.slice(0,f.value.length-1));if(m.value){for(let w=1;w<=-O;w++)F.push(0),Y.push(0);if(l.value!=1){let w=e[u.value][l.value-2].track.length-1;for(;w>=0;w--)if(!(_.valueOf()<A(e[u.value][l.value-2].track[w].date))){N.value[1]?e.required[l.value-2].track.splice(w+1,0,{date:s,value:n.value}):e[u.value][l.value-2].track.splice(w+1,0,{name:g.value,value:n.value,date:s,mode:h.value});break}for(w==-1&&(N.value[1]?e[u.value][l.value-2].track.splice(0,0,{date:s,value:n.value}):e[u.value][l.value-2].track.splice(0,0,{name:g.value,value:n.value,date:s,mode:h.value}));e[u.value][l.value-2].enteriesPerMonth.length<F.length;)e[u.value][l.value-2].enteriesPerMonth.splice(0,0,0),e[u.value][l.value-2].valuePerMonth.splice(0,0,0);for(;e[u.value][l.value-2].enteriesPerMonth.length>F.length;)F.splice(0,0,0),Y.splice(0,0,0);e[u.value][l.value-2].enteriesPerMonth=F.map((J,ae)=>J+e[u.value][l.value-2].enteriesPerMonth[ae]),e[u.value][l.value-2].valuePerMonth=Y.map((J,ae)=>J+e[u.value][l.value-2].valuePerMonth[ae]),_.valueOf()<A(e[u.value][l.value-2].init)&&(e[u.value][l.value-2].init=s),le=!0}let p=[n.value,0,0,0,0];for(u.value=="required"?(p[1]+=n.value,p[1]=q(p[1])):u.value=="needs"?(p[2]+=n.value,p[2]=q(p[2])):(p[3]+=n.value,p[3]=q(p[3])),D=e.history.day.length-1;D>=0&&!(_.valueOf()>=A(e.history.day[D].date));D--);D==-1?e.history.day.splice(0,0,{date:s,spend:p}):e.history.day[D].date==s?e.history.day[D].spend=e.history.day[D].spend.map((w,J)=>w+p[J]):e.history.day.splice(D+1,0,{date:s,spend:p})}}if(N.value[0]){if(t[e.base.length]={name:f.value,value:n.value,spantill:[V.value[0],V.value[1]],init:s},m.value){let c=e.history.day.findLastIndex(p=>A(p.date)<=_.valueOf()),O=1;c==-1&&(c=0,O=0),A(e.history.day[c].date)==_.valueOf()?(e.history.day[c].spend[4]+=n.value,e.history.day[c].spend[4]=q(e.history.day[c].spend[4])):e.history.day.splice(c+O,0,{date:s,spend:[0,0,0,0,n.value]})}else e.history.day[e.history.day.length-1].spend[4]=n.value;e.base.length=e.base.length+1,a=!0}else if(N.value[1]){if(l.value==1)t[e.required.length]={name:f.value,value:n.value,totalspend:n.value,valuePerMonth:Y,enteriesPerMonth:F,homelog:Z.value,init:s,excludes:H.value.sort(),track:[{date:s,value:n.value}]},e.required.length=e.required.length+1,a=!0,console.log(t);else if(e.required[l.value-2].totalspend=e.required[l.value-2].totalspend+n.value,!le){e.required[l.value-2].track.push({date:s,value:n.value});let c=e.required[l.value-2].track[e.required[l.value-2].track.length-2].date;oe(c,2)<=P.getMonth()?(e.required[l.value-2].valuePerMonth.push(n.value),e.required[l.value-2].enteriesPerMonth.push(1)):(e.required[l.value-2].valuePerMonth[e.required[l.value-2].valuePerMonth.length-1]+=n.value,e.required[l.value-2].valuePerMonth[e.required[l.value-2].valuePerMonth.length-1]=q(e.required[l.value-2].valuePerMonth[e.required[l.value-2].valuePerMonth.length-1]),e.required[l.value-2].enteriesPerMonth[e.required[l.value-2].enteriesPerMonth.length-1]+=1)}m.value||ee(1,n.value)}else{if(g.value[g.value.length-1]==" "&&(g.value=g.value.slice(0,g.value.length-1)),h.value[h.value.length-1]==" "&&(h.value=h.value.slice(0,h.value.length-1)),l.value==1)t[e[u.value].length]={name:f.value,totalspend:n.value,init:s,valuePerMonth:Y,enteriesPerMonth:F,track:[{name:g.value,value:n.value,date:s,mode:h.value}]},e[u.value].length=e[u.value].length+1,a=!0;else if(e[u.value][l.value-2].totalspend=e[u.value][l.value-2].totalspend+n.value,!le){e[u.value][l.value-2].track.push({name:g.value,value:n.value,date:s,mode:h.value});let c=e[u.value][l.value-2].track[e[u.value][l.value-2].track.length-2].date;oe(c,2)<=P.getMonth()?(e[u.value][l.value-2].valuePerMonth.push(n.value),e[u.value][l.value-2].enteriesPerMonth.push(1)):(e[u.value][l.value-2].valuePerMonth[e[u.value][l.value-2].valuePerMonth.length-1]+=n.value,e[u.value][l.value-2].valuePerMonth[e[u.value][l.value-2].valuePerMonth.length-1]=q(e[u.value][l.value-2].valuePerMonth[e[u.value][l.value-2].valuePerMonth.length-1]),e[u.value][l.value-2].enteriesPerMonth[e[u.value][l.value-2].enteriesPerMonth.length-1]+=1)}m.value||(u.value=="needs"?ee(2,n.value):ee(3,n.value))}a&&(Object.assign(e[u.value],t),console.log(t)),localStorage.setItem("_DATA_",JSON.stringify(e)),he.go(-1)}function ke(a){return a>=P.valueOf()}function A(a){let t=a.split("-");return Date.parse(`${t[2]}/${t[1]}/${t[0]}`)}function oe(a,t){const s=a.split("-");return parseInt(s[t-1])}function ee(a,t){e.history.day[e.history.day.length-1].spend[a]+=t,e.history.day[e.history.day.length-1].spend[0]+=t,e.history.day[e.history.day.length-1].spend[a]=q(e.history.day[e.history.day.length-1].spend[a]),e.history.day[e.history.day.length-1].spend[0]=q(e.history.day[e.history.day.length-1].spend[0])}function xe(){let a=new Date;return a.setDate(P.getDate()-1),a.valueOf()}function _e(a){a.length>1?a[a.length-1]==" "&&a[a.length-2]==" "||(f.value=a):a[0]!=" "&&(f.value=a),z(I.value)}function we(){let a=f.value.replaceAll(" ","");for(let t=0;t<e[u.value].length;t++)a==e[u.value][t].name&&(ne="Catagory with this name already exists!",X.value=!0,f.value="")}function qe(a){a.length>1?a[a.length-1]==" "&&a[a.length-2]==" "||(g.value=a):a[0]!=" "&&(g.value=a),z(r.value[2]||r.value[3])}function Ne(a){h.value=a.replace("  "," "),z(r.value[2]||r.value[3])}function q(a){return Math.round(a*100)/100}return(a,t)=>(R(),ze($e,null,[o(Be,{title:"Add Expense"}),o(v(G),{vertical:"",size:"large",style:{"margin-left":"7px","margin-right":"7px"}},{default:d(()=>[o(v(de),{value:u.value,"onUpdate:value":[t[0]||(t[0]=s=>u.value=s),t[1]||(t[1]=s=>me())],options:ge,size:"large",id:"selectFeildTemplate",placeholder:"Please Select Template"},null,8,["value"]),o(v(de),{value:l.value,"onUpdate:value":[t[2]||(t[2]=s=>l.value=s),t[3]||(t[3]=s=>Me())],disabled:se.value,size:"large",id:"selectFeildSvalue",placeholder:"Please Select Category",options:v(E)},null,8,["value","disabled","options"])]),_:1}),S("div",Ue,[o(v(G),{vertical:""},{default:d(()=>[B.value?(R(),W(v(ue),{key:0,class:"dividerStyle"},{default:d(()=>[k(" Parameters")]),_:1})):L("",!0),M(o(v(te),{value:f.value,type:"text",maxlength:"100",size:"large",class:"inputFeild",placeholder:"Input New Category Name","on-input":_e,"on-blur":we},null,8,["value"]),[[b,I.value]]),M(o(v(ie),{class:"inputFeild","on-update:value":s=>{V.value=s,z(r.value[0])},"update-value-on-close":!0,size:"large",type:"daterange",format:"dd-MMM-yyyy"},null,8,["on-update:value"]),[[b,r.value[0]]]),M(S("div",Ve,[k("Enable Homepage Viewing "),o(v(Ee),{value:Z.value,"onUpdate:value":t[4]||(t[4]=s=>Z.value=s),style:{float:"right","margin-top":"3px"}},null,8,["value"])],512),[[b,r.value[1]]])]),_:1}),o(v(G),{vertical:""},{default:d(()=>[o(v(fe),{show:K.value,"onUpdate:show":t[5]||(t[5]=s=>K.value=s),preset:"dialog",title:"Dialog"},{header:d(()=>[Ae]),_:1},8,["show"]),M(o(v(te),{value:g.value,type:"text",maxlength:"100",size:"large",class:"inputFeild",placeholder:"Input Spend Name","on-input":qe},null,8,["value"]),[[b,r.value[2]||r.value[3]]]),S("div",Ye,[M(o(v(te),{value:h.value,type:"text",maxlength:"100",size:"large",class:"inputFeild",placeholder:"Input Payment Method ","on-input":Ne},null,8,["value"]),[[b,r.value[2]||r.value[3]]]),S("div",null,[M(o(v(U),{class:"modeButton",onClick:t[6]||(t[6]=s=>h.value="Card"),circle:"",secondary:"",type:"primary",size:"small"},{default:d(()=>[k("Card")]),_:1},512),[[b,r.value[2]||r.value[3]]]),M(o(v(U),{class:"modeButton",onClick:t[7]||(t[7]=s=>h.value="Cash"),circle:"",secondary:"",type:"primary",size:"small"},{default:d(()=>[k("Cash")]),_:1},512),[[b,r.value[2]||r.value[3]]]),M(o(v(U),{class:"modeButton",onClick:t[8]||(t[8]=s=>h.value="UPI"),circle:"",secondary:"",type:"primary",size:"small"},{default:d(()=>[k("UPI")]),_:1},512),[[b,r.value[2]||r.value[3]]])])]),Je,M(o(v($),{checked:m.value,"onUpdate:checked":t[9]||(t[9]=s=>m.value=s),class:"optionsStyle","on-update:value":z(!0)},{default:d(()=>[k(" Add to a Past Date ")]),_:1},8,["checked","on-update:value"]),[[b,Q.value]]),r.value[1]?(R(),W(v(ue),{key:0,class:"dividerStyle"},{default:d(()=>[k(" Exception Days")]),_:1})):L("",!0)]),_:1}),M(o(v(Te),{value:H.value,"onUpdate:value":t[10]||(t[10]=s=>H.value=s),class:"optionsStyle","on-update:value":be},{default:d(()=>[o(v(G),{"item-style":"display: flex;"},{default:d(()=>[o(v($),{value:"1",label:"Mon"}),o(v($),{value:"2",label:"Tue"}),o(v($),{value:"3",label:"Wed"}),o(v($),{value:"4",label:"Thu"}),o(v($),{value:"5",label:"Fri"}),o(v($),{value:"6",label:"Sat"}),o(v($),{value:"0",label:"Sun"})]),_:1})]),_:1},8,["value"]),[[b,r.value[1]]]),o(v(G),{vertical:""},{default:d(()=>[m.value?(R(),W(v(ue),{key:0,class:"dividerStyle"},{default:d(()=>[k(" Past Date ")]),_:1})):L("",!0),M(o(v(ie),{value:T.value,"onUpdate:value":t[11]||(t[11]=s=>T.value=s),type:"date",size:"large",class:"inputFeild","is-date-disabled":ke,"on-confirm":z(m.value),format:"dd-MMM-yyyy",actions:["clear"]},null,8,["value","on-confirm"]),[[b,m.value]]),M(S("div",null,[o(v(U),{class:"modeButton",onClick:t[12]||(t[12]=s=>T.value=xe()),circle:"",secondary:"",type:"primary",size:"small"},{default:d(()=>[k("Yesterday")]),_:1}),v(P).getDate()!=1?(R(),W(v(U),{key:0,class:"modeButton",onClick:t[13]||(t[13]=s=>T.value=Date.parse(`${v(P).getFullYear()}-${v(P).getMonth()+1}-01`)),circle:"",secondary:"",type:"primary",size:"small"},{default:d(()=>[k("1st "+re(ye[v(P).getMonth()]),1)]),_:1})):L("",!0)],512),[[b,m.value&&(r.value[2]||r.value[3])]]),o(v(Oe),{disabled:y.value,id:"inp_num",value:n.value,"onUpdate:value":t[14]||(t[14]=s=>n.value=s),placeholder:"O",min:0,"show-button":!1,size:"large",class:"moneyInputStyle"},{prefix:d(()=>[k(" â‚¹ ")]),_:1},8,["disabled","value"]),S("div",Re,[M(o(v(U),{class:"createButton",onClick:t[15]||(t[15]=s=>Pe()),type:"primary",size:"large"},{default:d(()=>[k(" Create Value ")]),_:1},512),[[b,n.value]])])]),_:1})]),o(v(fe),{show:X.value,"onUpdate:show":t[16]||(t[16]=s=>X.value=s),preset:"dialog",title:"Dialog"},{header:d(()=>[S("div",null,re(v(ne)),1)]),_:1},8,["show"])],64))}},ll=De(Ge,[["__scopeId","data-v-3e35deed"]]);export{ll as default};
