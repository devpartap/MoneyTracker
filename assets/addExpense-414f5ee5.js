import{_ as Se,J as De,i as qe,r as i,l as J,x as Ce,z as o,s as d,u as v,B as D,j as m,v as b,F as ze,q as H,A as P,C as W,y as oe,G as $e,H as Ie}from"./index-1b249620.js";import{_ as Fe}from"./c_header-04a75c71.js";import{N as R,a as re,b as z,c as Be}from"./Space-95371e08.js";import{N as ae}from"./Input-9177eabc.js";import{N as ie}from"./Select-f4136871.js";import{N as te}from"./Divider-934dc452.js";import{b as Te,N as de,d as Ee}from"./Switch-47948811.js";import{F as O}from"./Button-0269824d.js";import"./fade-in-scale-up.cssr-8360d36f.js";const fe=G=>($e("data-v-4fd99818"),G=G(),Ie(),G),Oe={style:{"margin-left":"20px","margin-right":"20px"}},Ue={class:"optionsStyle"},Ve=fe(()=>D("div",null,"Input New Value",-1)),Ae={style:{width:"100%",display:"flex","flex-direction":"column"}},Ye=fe(()=>D("br",null,null,-1)),Je={style:{width:"100%","text-align":"center","margin-top":"10px"}},Re={__name:"addExpense",setup(G){const pe=De(),e=qe("$data"),u=i(""),t=i(""),f=i(""),n=i(null),ue=i(!0),c=i(!0),$=i(!1),F=i(!1),r=i([!1,!1,!1,!1]),N=i([!1,!1,!1]),L=i(!0),U=i([null,null]),j=i([]),Z=i(!1),h=i(""),p=i(""),K=i(!1),g=i(!1),se=i(!1),B=i(),Q=i(!1);let ve="",M=new Date,ce=`${M.getDate()}-${M.getMonth()+1}-${M.getFullYear()}`;const he=["Jan","Feb","Mar","Aprl","May","June","July","Aug","Sept","Oct","Nov","Dec"],ge=[{label:"Base",value:"base",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"},{label:"Required",value:"required",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"},{label:"Needs",value:"needs",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"},{label:"Wants",value:"wants",style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:16px;"}];let T=[];function q(l){r.value[0]=l===1,r.value[1]=l===2,r.value[2]=l===3,r.value[3]=l===4}function k(l){N.value[0]=l===1,N.value[1]=l===2,N.value[2]=l===3}function ye(){if(T=[],ue.value=!1,F.value=!1,$.value=!1,c.value=!0,K.value=!1,g.value=!1,t.value="",q(5),u.value!="base"){for(let l=0;l+1<=e[u.value].length;l++){let a=0;e[u.value][l].enteriesPerMonth.forEach(s=>{a+=s}),T.push({label:e[u.value][l].name,value:l+2,style:"font-family: 'roboto-regular';color: rgb(77,77,77);font-size:15px;",totalenty:a})}T.sort((l,a)=>a.totalenty-l.totalenty)}T.push({label:"New Category",value:1,style:"font-family: 'roboto-medium';color: rgb(77,77,77);font-size:15px;"}),console.log(T)}function me(){c.value=!0,t.value==1?(F.value=!0,$.value=!0,u.value=="base"?q(1):u.value=="required"?(se.value=!0,q(2)):u.value=="needs"?q(3):q(4)):($.value=!1,F.value=!1,se.value=!1,q(0),k(0),u.value=="needs"&&(F.value=!0,$.value=!1,q(3)),u.value=="wants"&&(F.value=!0,$.value=!1,q(4))),K.value=!0,C(!0)}function C(l){l&&(u.value=="base"?(console.log(U.value),f.value!=""&&U.value[0]!=null?(c.value=!1,k(1)):(c.value=!0,k(0))):u.value=="required"?(console.log(f.value),t.value==1?f.value!=""?(c.value=!1,k(2)):(c.value=!0,k(0)):t.value!=0?(console.log(t.value),c.value=!1,k(2)):(c.value=!0,k(0))):h.value!=""&&p.value!=""?t.value==1?f.value!=""?(c.value=!1,k(3)):(c.value=!0,k(0)):(c.value=!1,k(3)):(c.value=!0,k(0)),g.value&&(B.value||(c.value=!0)))}function be(l){l.length>=7?Z.value=!0:(j.value=l,C(r.value[1]))}function Me(){let l=!1,a={};console.log(N.value);let s=ce,I=[1],A=[n.value],x=M,S=null,ee=!1;if(g.value&&(x=new Date(B.value),s=`${x.getDate()}-${x.getMonth()+1}-${x.getFullYear()}`),!N.value[0]){let y,E=0;if(t.value!=1){y=e[u.value][t.value-2+(t.value===1)].track[e[u.value][t.value-2+(t.value===1)].track.length-1].date.split("-"),E=(x.getFullYear()-parseInt(y[2]))*12+(x.getMonth()-parseInt(y[1])+1);for(let _=0;_<E;_++)e[u.value][t.value-2].valuePerMonth.push(0),e[u.value][t.value-2].enteriesPerMonth.push(0)}else f.value[f.value.length-1]==" "&&(f.value=f.value.slice(0,f.value.length-1));if(g.value){for(let w=1;w<=-E;w++)I.push(0),A.push(0);if(t.value!=1){let w=e[u.value][t.value-2].track.length-1;for(;w>=0;w--)if(!(x.valueOf()<V(e[u.value][t.value-2].track[w].date))){N.value[1]?e.required[t.value-2].track.splice(w+1,0,{date:s,value:n.value}):e[u.value][t.value-2].track.splice(w+1,0,{name:h.value,value:n.value,date:s,mode:p.value});break}for(w==-1&&(N.value[1]?e[u.value][t.value-2].track.splice(0,0,{date:s,value:n.value}):e[u.value][t.value-2].track.splice(0,0,{name:h.value,value:n.value,date:s,mode:p.value}));e[u.value][t.value-2].enteriesPerMonth.length<I.length;)e[u.value][t.value-2].enteriesPerMonth.splice(0,0,0),e[u.value][t.value-2].valuePerMonth.splice(0,0,0);for(;e[u.value][t.value-2].enteriesPerMonth.length>I.length;)I.splice(0,0,0),A.splice(0,0,0);e[u.value][t.value-2].enteriesPerMonth=I.map((Y,le)=>Y+e[u.value][t.value-2].enteriesPerMonth[le]),e[u.value][t.value-2].valuePerMonth=A.map((Y,le)=>Y+e[u.value][t.value-2].valuePerMonth[le]),x.valueOf()<V(e[u.value][t.value-2].init)&&(e[u.value][t.value-2].init=s),ee=!0}let _=[n.value,0,0,0,0];for(u.value=="required"?_[1]+=n.value:u.value=="needs"?_[2]+=n.value:_[3]+=n.value,S=e.history.day.length-1;S>=0&&!(x.valueOf()>=V(e.history.day[S].date));S--);S==-1?e.history.day.splice(0,0,{date:s,spend:_}):e.history.day[S].date==s?e.history.day[S].spend=e.history.day[S].spend.map((w,Y)=>w+_[Y]):e.history.day.splice(S+1,0,{date:s,spend:_})}}if(N.value[0]){if(a[e.base.length]={name:f.value,value:n.value,spantill:[U.value[0],U.value[1]],init:s},g.value){let y=e.history.day.findLastIndex(_=>V(_.date)<=x.valueOf()),E=1;y==-1&&(y=0,E=0),V(e.history.day[y].date)==x.valueOf()?e.history.day[y].spend[4]+=n.value:e.history.day.splice(y+E,0,{date:s,spend:[0,0,0,0,n.value]})}else e.history.day[e.history.day.length-1].spend[4]=n.value;e.base.length=e.base.length+1,l=!0}else if(N.value[1]){if(t.value==1)a[e.required.length]={name:f.value,value:n.value,totalspend:n.value,valuePerMonth:A,enteriesPerMonth:I,homelog:L.value,init:s,excludes:j.value.sort(),track:[{date:s,value:n.value}]},e.required.length=e.required.length+1,l=!0,console.log(a);else if(e.required[t.value-2].totalspend=e.required[t.value-2].totalspend+n.value,!ee){e.required[t.value-2].track.push({date:s,value:n.value});let y=e.required[t.value-2].track[e.required[t.value-2].track.length-2].date;ne(y,2)<=M.getMonth()?(e.required[t.value-2].valuePerMonth.push(n.value),e.required[t.value-2].enteriesPerMonth.push(1)):(e.required[t.value-2].valuePerMonth[e.required[t.value-2].valuePerMonth.length-1]+=n.value,e.required[t.value-2].enteriesPerMonth[e.required[t.value-2].enteriesPerMonth.length-1]+=1)}g.value||X(1,n.value)}else{if(h.value[h.value.length-1]==" "&&(h.value=h.value.slice(0,h.value.length-1)),p.value[p.value.length-1]==" "&&(p.value=p.value.slice(0,p.value.length-1)),t.value==1)a[e[u.value].length]={name:f.value,totalspend:n.value,init:s,valuePerMonth:A,enteriesPerMonth:I,track:[{name:h.value,value:n.value,date:s,mode:p.value}]},e[u.value].length=e[u.value].length+1,l=!0;else if(e[u.value][t.value-2].totalspend=e[u.value][t.value-2].totalspend+n.value,!ee){e[u.value][t.value-2].track.push({name:h.value,value:n.value,date:s,mode:p.value});let y=e[u.value][t.value-2].track[e[u.value][t.value-2].track.length-2].date;ne(y,2)<=M.getMonth()?(e[u.value][t.value-2].valuePerMonth.push(n.value),e[u.value][t.value-2].enteriesPerMonth.push(1)):(e[u.value][t.value-2].valuePerMonth[e[u.value][t.value-2].valuePerMonth.length-1]+=n.value,e[u.value][t.value-2].enteriesPerMonth[e[u.value][t.value-2].enteriesPerMonth.length-1]+=1)}g.value||(u.value=="needs"?X(2,n.value):X(3,n.value))}l&&(Object.assign(e[u.value],a),console.log(a)),localStorage.setItem("_DATA_",JSON.stringify(e)),pe.go(-1)}function Pe(l){return l>=M.valueOf()}function V(l){let a=l.split("-");return Date.parse(`${a[2]}/${a[1]}/${a[0]}`)}function ne(l,a){const s=l.split("-");return parseInt(s[a-1])}function X(l,a){e.history.day[e.history.day.length-1].spend[l]+=a,e.history.day[e.history.day.length-1].spend[0]+=a}function ke(){let l=new Date;return l.setDate(M.getDate()-1),l.valueOf()}function xe(l){l.length>1?l[l.length-1]==" "&&l[l.length-2]==" "||(f.value=l):l[0]!=" "&&(f.value=l),C($.value)}function _e(){let l=f.value.replaceAll(" ","");for(let a=0;a<e[u.value].length;a++)l==e[u.value][a].name&&(ve="Catagory with this name already exists!",Q.value=!0,f.value="")}function we(l){l.length>1?l[l.length-1]==" "&&l[l.length-2]==" "||(h.value=l):l[0]!=" "&&(h.value=l),C(r.value[2]||r.value[3])}function Ne(l){p.value=l.replace("  "," "),C(r.value[2]||r.value[3])}return(l,a)=>(J(),Ce(ze,null,[o(Fe,{title:"Add Expense"}),o(v(R),{vertical:"",size:"large",style:{"margin-left":"7px","margin-right":"7px"}},{default:d(()=>[o(v(ie),{value:u.value,"onUpdate:value":[a[0]||(a[0]=s=>u.value=s),a[1]||(a[1]=s=>ye())],options:ge,size:"large",id:"selectFeildTemplate",placeholder:"Please Select Template"},null,8,["value"]),o(v(ie),{value:t.value,"onUpdate:value":[a[2]||(a[2]=s=>t.value=s),a[3]||(a[3]=s=>me())],disabled:ue.value,size:"large",id:"selectFeildSvalue",placeholder:"Please Select Category",options:v(T)},null,8,["value","disabled","options"])]),_:1}),D("div",Oe,[o(v(R),{vertical:""},{default:d(()=>[F.value?(J(),H(v(te),{key:0,class:"dividerStyle"},{default:d(()=>[P(" Parameters")]),_:1})):W("",!0),m(o(v(ae),{value:f.value,type:"text",maxlength:"100",size:"large",class:"inputFeild",placeholder:"Input New Category Name","on-input":xe,"on-blur":_e},null,8,["value"]),[[b,$.value]]),m(o(v(re),{class:"inputFeild","on-update:value":s=>{U.value=s,C(r.value[0])},"update-value-on-close":!0,size:"large",type:"daterange",format:"dd-MMM-yyyy"},null,8,["on-update:value"]),[[b,r.value[0]]]),m(D("div",Ue,[P("Enable Homepage Viewing "),o(v(Te),{value:L.value,"onUpdate:value":a[4]||(a[4]=s=>L.value=s),style:{float:"right","margin-top":"3px"}},null,8,["value"])],512),[[b,r.value[1]]])]),_:1}),o(v(R),{vertical:""},{default:d(()=>[o(v(de),{show:Z.value,"onUpdate:show":a[5]||(a[5]=s=>Z.value=s),preset:"dialog",title:"Dialog"},{header:d(()=>[Ve]),_:1},8,["show"]),m(o(v(ae),{value:h.value,type:"text",maxlength:"100",size:"large",class:"inputFeild",placeholder:"Input Spend Name","on-input":we},null,8,["value"]),[[b,r.value[2]||r.value[3]]]),D("div",Ae,[m(o(v(ae),{value:p.value,type:"text",maxlength:"100",size:"large",class:"inputFeild",placeholder:"Input Payment Method ","on-input":Ne},null,8,["value"]),[[b,r.value[2]||r.value[3]]]),D("div",null,[m(o(v(O),{class:"modeButton",onClick:a[6]||(a[6]=s=>p.value="Card"),circle:"",secondary:"",type:"primary",size:"small"},{default:d(()=>[P("Card")]),_:1},512),[[b,r.value[2]||r.value[3]]]),m(o(v(O),{class:"modeButton",onClick:a[7]||(a[7]=s=>p.value="Cash"),circle:"",secondary:"",type:"primary",size:"small"},{default:d(()=>[P("Cash")]),_:1},512),[[b,r.value[2]||r.value[3]]]),m(o(v(O),{class:"modeButton",onClick:a[8]||(a[8]=s=>p.value="UPI"),circle:"",secondary:"",type:"primary",size:"small"},{default:d(()=>[P("UPI")]),_:1},512),[[b,r.value[2]||r.value[3]]])])]),Ye,m(o(v(z),{checked:g.value,"onUpdate:checked":a[9]||(a[9]=s=>g.value=s),class:"optionsStyle","on-update:value":C(!0)},{default:d(()=>[P(" Add to a Past Date ")]),_:1},8,["checked","on-update:value"]),[[b,K.value]]),r.value[1]?(J(),H(v(te),{key:0,class:"dividerStyle"},{default:d(()=>[P(" Exception Days")]),_:1})):W("",!0)]),_:1}),m(o(v(Be),{value:j.value,"onUpdate:value":a[10]||(a[10]=s=>j.value=s),class:"optionsStyle","on-update:value":be},{default:d(()=>[o(v(R),{"item-style":"display: flex;"},{default:d(()=>[o(v(z),{value:"1",label:"Mon"}),o(v(z),{value:"2",label:"Tue"}),o(v(z),{value:"3",label:"Wed"}),o(v(z),{value:"4",label:"Thu"}),o(v(z),{value:"5",label:"Fri"}),o(v(z),{value:"6",label:"Sat"}),o(v(z),{value:"0",label:"Sun"})]),_:1})]),_:1},8,["value"]),[[b,r.value[1]]]),o(v(R),{vertical:""},{default:d(()=>[g.value?(J(),H(v(te),{key:0,class:"dividerStyle"},{default:d(()=>[P(" Past Date ")]),_:1})):W("",!0),m(o(v(re),{value:B.value,"onUpdate:value":a[11]||(a[11]=s=>B.value=s),type:"date",size:"large",class:"inputFeild","is-date-disabled":Pe,"on-confirm":C(g.value),format:"dd-MMM-yyyy",actions:["clear"]},null,8,["value","on-confirm"]),[[b,g.value]]),m(D("div",null,[o(v(O),{class:"modeButton",onClick:a[12]||(a[12]=s=>B.value=ke()),circle:"",secondary:"",type:"primary",size:"small"},{default:d(()=>[P("Yesterday")]),_:1}),v(M).getDate()!=1?(J(),H(v(O),{key:0,class:"modeButton",onClick:a[13]||(a[13]=s=>B.value=Date.parse(`${v(M).getFullYear()}-${v(M).getMonth()+1}-01`)),circle:"",secondary:"",type:"primary",size:"small"},{default:d(()=>[P("1st "+oe(he[v(M).getMonth()]),1)]),_:1})):W("",!0)],512),[[b,g.value&&(r.value[2]||r.value[3])]]),o(v(Ee),{disabled:c.value,id:"inp_num",value:n.value,"onUpdate:value":a[14]||(a[14]=s=>n.value=s),placeholder:"O",min:0,"show-button":!1,size:"large",class:"moneyInputStyle"},{prefix:d(()=>[P(" â‚¹ ")]),_:1},8,["disabled","value"]),D("div",Je,[m(o(v(O),{class:"createButton",onClick:a[15]||(a[15]=s=>Me()),type:"primary",size:"large"},{default:d(()=>[P(" Create Value ")]),_:1},512),[[b,n.value]])])]),_:1})]),o(v(de),{show:Q.value,"onUpdate:show":a[16]||(a[16]=s=>Q.value=s),preset:"dialog",title:"Dialog"},{header:d(()=>[D("div",null,oe(v(ve)),1)]),_:1},8,["show"])],64))}},el=Se(Re,[["__scopeId","data-v-4fd99818"]]);export{el as default};
