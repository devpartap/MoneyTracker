import{_ as ke}from"./c_header-ff8a320c.js";import{d as xe,a as $e,h as we,_ as De,i as ie,r as R,l as w,x as N,z as B,B as f,s as q,u as o,F as j,A as O,E as Q,I as Ne,y as d,q as X,C as I,G as Be,H as Fe}from"./index-646ae920.js";import{d as Me,j as fe,q as Se,G as qe,H as Ce,J as ue,F as G}from"./Button-0aba27f2.js";import{f as ze,h as Re}from"./fade-in-scale-up.cssr-10204711.js";import{N as de}from"./Select-b06d037c.js";import{N as Z}from"./Divider-fa603a2b.js";import{N as Ie}from"./Scrollbar-877f28c0.js";const Pe={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},Ye=()=>Pe,Ee={name:"Flex",self:Ye},Te=Ee,je=Object.assign(Object.assign({},fe.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),ce=xe({name:"Flex",props:je,setup($){const{mergedClsPrefixRef:k,mergedRtlRef:n}=Me($),g=fe("Flex","-flex",void 0,Te,$,k);return{rtlEnabled:Se("Flex",n,k),mergedClsPrefix:k,margin:$e(()=>{const{size:e}=$;if(Array.isArray(e))return{horizontal:e[0],vertical:e[1]};if(typeof e=="number")return{horizontal:e,vertical:e};const{self:{[qe("gap",e)]:_}}=g.value,{row:m,col:u}=Ce(_);return{horizontal:ue(u),vertical:ue(m)}})}},render(){const{vertical:$,reverse:k,align:n,inline:g,justify:i,margin:e,wrap:_,mergedClsPrefix:m,rtlEnabled:u}=this,F=ze(Re(this),!1);return F.length?we("div",{role:"none",class:[`${m}-flex`,u&&`${m}-flex--rtl`],style:{display:g?"inline-flex":"flex",flexDirection:(()=>$&&!k?"column":$&&k?"column-reverse":!$&&k?"row-reverse":"row")(),justifyContent:i,flexWrap:!_||$?"nowrap":"wrap",alignItems:n,gap:`${e.vertical}px ${e.horizontal}px`}},F):null}});const V=$=>(Be("data-v-92c91818"),$=$(),Fe(),$),Oe=V(()=>f("span",{class:"dropdownTitle"},"View: ",-1)),Ge={style:{width:"30%","margin-top":"10px","padding-bottom":"10px"}},Ve=V(()=>f("span",{class:"dropdownTitle"},"Group By: ",-1)),We={style:{width:"27%","margin-top":"10px","padding-bottom":"10px"}},He=["onClick"],Ae={id:"itm_id"},Le={id:"itm_name"},Je={id:"itm_cls"},Ue={id:"itm_amt"},Ke={id:"itm_dte"},Qe={key:1},Xe=V(()=>f("h2",{style:{"text-align":"center",color:"gray"}},"NO SPENDING FOUND",-1)),Ze=[Xe],et={id:"itm_id"},tt={id:"itm_name"},at={id:"itm_cls"},lt={id:"itm_amt"},rt={id:"itm_dte"},nt={id:"itm_id"},ot={id:"itm_name"},st={id:"itm_cls"},it={id:"itm_amt"},ut={style:{display:"none"}},dt={key:1},ct=V(()=>f("h2",{style:{"text-align":"center",color:"gray"}},"NO SPENDING FOUND",-1)),ft=[ct],gt={__name:"spendHistory",setup($){const k=ie("$globaldata"),n=ie("$data");let g=0,i=[],e=[[],[],[]],_=[],m=[],u=[0,0,0],F=[0,0,0],C=0,ee=0,te=0,b=R(0),v=R(k.groupBy_opt),y=R(k.view_opt),c=R(k.catagory_actv),P=R(["#444444","#01700c"]),s=new Date(Date.now()),W=0,H=0,A=0,L=0;const Y=["Jan","Feb","Mar","Aprl","May","June","July","Aug","Sept","Oct","Nov","Dec"],ge=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];e[0][0]=n.required.length,e[1][0]=n.needs.length,e[2][0]=n.wants.length;let ae=n.base.length;for(let l=0;l<=e[0][0]-1;l++)e[0].push(n.required[l].track.length);for(let l=0;l<=e[1][0]-1;l++)e[1].push(n.needs[l].track.length);for(let l=0;l<=e[2][0]-1;l++)e[2].push(n.wants[l].track.length);function E(l){let a=!1,t=!1,p=!1,D=!1,x=!1;console.log("rendering");let M=n.history.day[0].date.split("-"),h=Date.parse(`${M[2]}/${M[1]}/${M[0]}`);for(;a!=!0;){if(A!=e[2][0]&&D==!1)for(let r=0;r<=e[2][0]-1;r++)for(;;){if(e[2][e[2][0]-r]<=0){e[2][e[2][0]-r]==0&&(A=A+1,e[2][e[2][0]-r]=-1);break}else if(console.log(`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`),n.wants[e[2][0]-1-r].track[e[2][e[2][0]-r]-1].date==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`){if(i.push({id:g,ref:e[2][0]-1-r,name:n.wants[e[2][0]-1-r].track[e[2][e[2][0]-r]-1].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.wants[e[2][0]-1-r].track[e[2][e[2][0]-r]-1].value,class:"Wants > "+n.wants[e[2][0]-1-r].name,catagory:"Wants>"+n.wants[e[2][0]-1-r].name,num_cat:3}),g=g+1,e[2][e[2][0]-r]=e[2][e[2][0]-r]-1,g>=l*(u[0]+1)){a=!0,u[0]=u[0]+1;break}}else break;if(a)break}else D=!0;if(a==!0)break;if(H!=e[1][0]&&p==!1)for(let r=0;r<=e[1][0]-1;r++)for(;;){if(e[1][e[1][0]-r]<=0){e[1][e[1][0]-r]==0&&(H=H+1,e[1][e[1][0]-r]=-1);break}else if(n.needs[e[1][0]-1-r].track[e[1][e[1][0]-r]-1].date==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`){if(i.push({id:g,ref:e[1][0]-1-r,name:n.needs[e[1][0]-1-r].track[e[1][e[1][0]-r]-1].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.needs[e[1][0]-1-r].track[e[1][e[1][0]-r]-1].value,class:"Needs > "+n.needs[e[1][0]-1-r].name,catagory:"Needs>"+n.needs[e[1][0]-1-r].name,num_cat:2}),g=g+1,e[1][e[1][0]-r]=e[1][e[1][0]-r]-1,g>=l*(u[0]+1)){a=!0,u[0]=u[0]+1;break}}else break;if(a)break}else p=!0;if(a==!0)break;if(W!=e[0][0]&&t==!1)for(let r=0;r<=e[0][0]-1;r++)for(;;){if(e[0][e[0][0]-r]<=0){e[0][e[0][0]-r]==0&&(W=W+1,e[0][e[0][0]-r]=-1);break}else if(console.log(`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`),n.required[e[0][0]-1-r].track[e[0][e[0][0]-r]-1].date==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`){if(i.push({id:g,ref:e[0][0]-1-r,name:n.required[e[0][0]-1-r].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.required[e[0][0]-1-r].track[e[0][e[0][0]-r]-1].value,class:"Required",catagory:"Required",num_cat:1}),g=g+1,e[0][e[0][0]-r]=e[0][e[0][0]-r]-1,g>=l*(u[0]+1)){a=!0,u[0]=u[0]+1;break}}else break;if(a)break}else t=!0;if(a==!0)break;if(L!=ae&&x==!1){for(let r=ae-1;r>=0;r--)if(console.log(`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`),n.base[r].init==`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`&&(i.push({id:g,ref:r,name:n.base[r].name,date:{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},value:n.base[r].value,class:"Base",catagory:"Base",num_cat:0}),g=g+1,L=L+1,g>=l*(u[0]+1))){a=!0,u[0]=u[0]+1;break}}else x=!0;if(s.valueOf()<h){F[0]=!0,console.log("explict break!");break}if(t&&p&&D&&x){F[0]=!0,console.log("out of gas");break}s.setDate(s.getDate()-1)}b.value=b.value+1}function J(l){for(let a=u[1]*l+te;_.length<(u[1]+1)*l;a++){if(a>n.history.day.length-1){F[1]=!0,console.log("out of gas!!");break}if(n.history.day[n.history.day.length-a-1].spend[0]==0&&n.history.day[n.history.day.length-a-1].spend[4]==0){te+=1;continue}_.push({day_id:_.length,date:n.history.day[n.history.day.length-a-1].date.split("-"),catagory_spend:n.history.day[n.history.day.length-a-1].spend.slice(1)})}u[1]+=1,b.value=b.value+1}function U(l){let a,t,p=0,D=!1,x=u[2]*l;for(let M=0;m.length<(u[2]+1)*l;M++){let h=[0,0,0,0];if(x+p>=n.history.day.length-1){D||m.push({month_id:m.length,date:n.history.day[0].date.split("-").slice(1),catagory_spend:n.history.day[0].spend.slice(1)}),F[2]=!0,console.log("out of gas!!");break}for(;;){if(h.forEach((r,se)=>{h[se]+=n.history.day[n.history.day.length-1-x-p].spend[se+1]}),x+p>n.history.day.length-2){D=!0;break}if(a=n.history.day[n.history.day.length-1-x-p].date.split("-"),t=n.history.day[n.history.day.length-2-x-p].date.split("-"),p+=1,t[1]!=a[1]||t[2]!=t[2]){D=!1;break}}h[0]=z(h[0]),h[1]=z(h[1]),h[2]=z(h[2]),h[3]=z(h[3]),m.push({month_id:m.length,date:n.history.day[n.history.day.length-x-p].date.split("-").slice(1),catagory_spend:h})}u[2]+=1,b.value=b.value+1}function S(l){let a="â‚¹";if(l){let t=l.toString(),p="",D=t.indexOf(".");D!=-1&&(p=t.slice(D),t=t.slice(0,D));let x=!1,M=t.length-1;M%2!=0&&(a=a+t.substring(0,1)+",",M-=1,x=!0);for(let h=0;h<M;h+=2)a=a+t.substring(h+x,h+x+2)+",";return a=a.slice(0,a.length-1),a+=t.substring(t.length-1,t.length-0),D!=-1?a+p:a}else return a+="0",a}function T(l){if(c.value[l]==1){let a=0;if(c.value.forEach(t=>{t==1&&(a+=1)}),a<=1)return!1;c.value[l]=0}else c.value[l]=1;b.value=b.value+1,K()}function ye(l){v.value=l,b.value=b.value+1,K()}function he(l){y.value=l,l==1&&i.length==0&&E(15),l==2&&_.length==0&&(v.value<2&&(v.value=2),J(15)),l==3&&m.length==0&&(v.value<3&&(v.value=3),U(15)),b.value=b.value+1,K()}function le(l){let a="[ ";return c.value[0]==1&&(a+="B: "+S(l[3])+" | "),c.value[1]==1&&(a+="R: "+S(l[0])+" | "),c.value[2]==1&&(a+="N: "+S(l[1])+" | "),c.value[3]==1&&(a+="W: "+S(l[2])+" | "),a=a.slice(0,a.length-2),a+="]",a}function re(l){let a=0;return c.value[0]==1&&(a+=l[3]),c.value[1]==1&&(a+=l[0]),c.value[2]==1&&(a+=l[1]),c.value[3]==1&&(a+=l[2]),z(a)}function _e(l){return b.value!=ee&&(ee=b.value,C=0),c.value[l]&&(C+=1),!!c.value[l]}function K(){k.groupBy_opt=v.value,k.catagory_actv=c.value,k.view_opt=y.value}function pe(l){if(l==i.length-1)return!1;if(v.value==1)return!0;let a=l;if(!c.value[i[a].num_cat])return!1;let t=a+1;for(;!c.value[i[t].num_cat];)if(t+=1,t==i.length)return!1;if(v.value==2)return i[a].date.day!=i[t].date.day||i[a].date.month!=i[t].date.month?!0:i[a].date.year!=i[t].date.year;if(v.value==3)return i[a].date.month!=i[t].date.month?!0:i[a].date.year!=i[t].date.year;if(v.value==4)return i[a].date.year!=i[t].date.year}function me(l){if(l==_.length-1)return!1;if(v.value==2)return!0;if(v.value==3)return _[l].date[1]!=_[l+1].date[1]?!0:_[l].date[2]!=_[l+1].date[2];if(v.value==4)return _[l].date[2]!=_[l+1].date[2]}function ve(l){if(l==m.length-1)return!1;if(v.value==3)return!0;if(v.value==4)return m[l].date[1]!=m[l+1].date[1]}function ne(l,a){return l.length>=a?l.slice(0,a-3)+"...":l}function be(){C<14*u[0]&&F[0]!=!0&&(console.log("RecallingMore"),E(15),u[0]-=1)}function z(l){return Math.round(l*100)/100}function oe(l,a,t){let p=new Date(l,a,t);return ge[p.getDay()]}return y.value==1?E(15):y.value==2?J(15):y.value==3&&U(15),(l,a)=>(w(),N(j,null,[B(ke,{title:"Spend History"}),f("div",null,[B(o(ce),{justify:"space-around",style:{"font-family":"'roboto-medium'"}},{default:q(()=>[B(o(G),{quaternary:"",type:"primary",round:"",secondary:"",color:o(P)[o(c)[1]],onClick:a[0]||(a[0]=t=>T(1)),size:"small"},{default:q(()=>[O(" Required ")]),_:1},8,["color"]),B(o(G),{quaternary:"",type:"primary",round:"",secondary:"",color:o(P)[o(c)[2]],onClick:a[1]||(a[1]=t=>T(2)),size:"small"},{default:q(()=>[O(" Needs ")]),_:1},8,["color"]),B(o(G),{quaternary:"",type:"primary",round:"",secondary:"",color:o(P)[o(c)[3]],onClick:a[2]||(a[2]=t=>T(3)),size:"small"},{default:q(()=>[O(" Wants ")]),_:1},8,["color"]),B(o(G),{quaternary:"",type:"primary",round:"",secondary:"",color:o(P)[o(c)[0]],onClick:a[3]||(a[3]=t=>T(0)),size:"small"},{default:q(()=>[O(" Base ")]),_:1},8,["color"])]),_:1}),B(o(ce),{justify:"end","align-items":"center"},{default:q(()=>[Oe,f("div",Ge,[B(o(de),{value:o(y),size:"small","on-update:value":he,options:[{label:"Per Item",value:1},{label:"Per Day",value:2},{label:"Per Month",value:3}]},null,8,["value"])]),Ve,f("div",We,[B(o(de),{value:o(v),size:"small","on-update:value":ye,options:[{label:"Item",value:1,disabled:o(y)>1},{label:"Day",value:2,disabled:o(y)>2},{label:"Month",value:3,disabled:o(y)>3},{label:"Year",value:4,disabled:o(y)>4}]},null,8,["value","options"])])]),_:1})]),B(o(Ie),{style:{"max-height":"46em"},trigger:l.hover,"on-scroll":t=>{t.target.scrollTop>=300+(o(u)[o(y)-1]-1)*860&&!o(F)[o(y)-1]&&(o(y)==1?E(15):o(y)==2?J(15):o(y)==3&&U(15))}},{default:q(()=>[o(i).length>0||o(_).length>0||o(m).length>0?(w(),N("div",{key:o(b)},[o(y)==1?(w(!0),N(j,{key:0},Q(o(i),t=>(w(),N("div",{key:t.id,class:Ne({itm_contain:_e(t.num_cat),itm_contain_emty:!o(c)[t.num_cat]}),onClick:p=>l.$router.push({name:"itemDetails",params:{_name:t.name,_catagory:t.catagory+t.ref}})},[f("div",Ae,d(o(C)),1),f("div",Le,d(ne(t.name,25)),1),f("div",Je,d(ne(t.class,45)),1),f("div",Ue,d(S(t.value)),1),f("div",Ke,d(t.date.day)+"-"+d(Y[t.date.month])+"-"+d(t.date.year)+" ("+d(oe(t.date.year,t.date.month,t.date.day))+")",1),pe(t.id)?(w(),X(o(Z),{key:0,id:"ndiv"})):I("",!0)],10,He))),128)):I("",!0),o(y)==1&&o(C)==0?(w(),N("div",Qe,Ze)):o(y)==2?(w(!0),N(j,{key:2},Q(o(_),t=>(w(),N("div",{key:t.day_id,class:"itm_contain"},[f("div",et,d(t.day_id+1),1),f("div",tt,d(t.date[0])+" "+d(Y[t.date[1]-1]),1),f("div",at,d(le(t.catagory_spend)),1),f("div",lt,d(S(re(t.catagory_spend))),1),f("div",rt,d(t.date[0])+"-"+d(Y[t.date[1]-1])+"-"+d(t.date[2])+" ("+d(oe(t.date[2],t.date[1]-1,t.date[0]))+")",1),me(t.day_id)?(w(),X(o(Z),{key:0,id:"ndiv"})):I("",!0)]))),128)):o(y)==3?(w(!0),N(j,{key:3},Q(o(m),t=>(w(),N("div",{key:t.month_id,class:"itm_contain"},[f("div",nt,d(t.month_id+1),1),f("div",ot,d(Y[t.date[0]-1])+" "+d(t.date[1]),1),f("div",st,d(le(t.catagory_spend)),1),f("div",it,d(S(re(t.catagory_spend))),1),ve(t.month_id)?(w(),X(o(Z),{key:0,id:"ndiv"})):I("",!0)]))),128)):I("",!0),f("span",ut,d(be()),1)])):(w(),N("div",dt,ft))]),_:1},8,["trigger","on-scroll"])],64))}},kt=De(gt,[["__scopeId","data-v-92c91818"]]);export{kt as default};
